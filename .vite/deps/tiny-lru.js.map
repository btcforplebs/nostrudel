{
  "version": 3,
  "sources": ["../../node_modules/.pnpm/tiny-lru@11.2.11/node_modules/tiny-lru/dist/tiny-lru.js"],
  "sourcesContent": ["/**\n * tiny-lru\n *\n * @copyright 2024 Jason Mulligan <jason.mulligan@avoidwork.com>\n * @license BSD-3-Clause\n * @version 11.2.11\n */\nclass LRU {\r\n\tconstructor (max = 0, ttl = 0, resetTtl = false) {\r\n\t\tthis.first = null;\r\n\t\tthis.items = Object.create(null);\r\n\t\tthis.last = null;\r\n\t\tthis.max = max;\r\n\t\tthis.resetTtl = resetTtl;\r\n\t\tthis.size = 0;\r\n\t\tthis.ttl = ttl;\r\n\t}\r\n\r\n\tclear () {\r\n\t\tthis.first = null;\r\n\t\tthis.items = Object.create(null);\r\n\t\tthis.last = null;\r\n\t\tthis.size = 0;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tdelete (key) {\r\n\t\tif (this.has(key)) {\r\n\t\t\tconst item = this.items[key];\r\n\r\n\t\t\tdelete this.items[key];\r\n\t\t\tthis.size--;\r\n\r\n\t\t\tif (item.prev !== null) {\r\n\t\t\t\titem.prev.next = item.next;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.next !== null) {\r\n\t\t\t\titem.next.prev = item.prev;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.first === item) {\r\n\t\t\t\tthis.first = item.next;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.last === item) {\r\n\t\t\t\tthis.last = item.prev;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tentries (keys = this.keys()) {\r\n\t\treturn keys.map(key => [key, this.get(key)]);\r\n\t}\r\n\r\n\tevict (bypass = false) {\r\n\t\tif (bypass || this.size > 0) {\r\n\t\t\tconst item = this.first;\r\n\r\n\t\t\tdelete this.items[item.key];\r\n\r\n\t\t\tif (--this.size === 0) {\r\n\t\t\t\tthis.first = null;\r\n\t\t\t\tthis.last = null;\r\n\t\t\t} else {\r\n\t\t\t\tthis.first = item.next;\r\n\t\t\t\tthis.first.prev = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\texpiresAt (key) {\r\n\t\tlet result;\r\n\r\n\t\tif (this.has(key)) {\r\n\t\t\tresult = this.items[key].expiry;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tget (key) {\r\n\t\tlet result;\r\n\r\n\t\tif (this.has(key)) {\r\n\t\t\tconst item = this.items[key];\r\n\r\n\t\t\tif (this.ttl > 0 && item.expiry <= Date.now()) {\r\n\t\t\t\tthis.delete(key);\r\n\t\t\t} else {\r\n\t\t\t\tresult = item.value;\r\n\t\t\t\tthis.set(key, result, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\thas (key) {\r\n\t\treturn key in this.items;\r\n\t}\r\n\r\n\tkeys () {\r\n\t\tconst result = [];\r\n\t\tlet x = this.first;\r\n\r\n\t\twhile (x !== null) {\r\n\t\t\tresult.push(x.key);\r\n\t\t\tx = x.next;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tset (key, value, bypass = false, resetTtl = this.resetTtl) {\r\n\t\tlet item;\r\n\r\n\t\tif (bypass || this.has(key)) {\r\n\t\t\titem = this.items[key];\r\n\t\t\titem.value = value;\r\n\r\n\t\t\tif (bypass === false && resetTtl) {\r\n\t\t\t\titem.expiry = this.ttl > 0 ? Date.now() + this.ttl : this.ttl;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.last !== item) {\r\n\t\t\t\tconst last = this.last,\r\n\t\t\t\t\tnext = item.next,\r\n\t\t\t\t\tprev = item.prev;\r\n\r\n\t\t\t\tif (this.first === item) {\r\n\t\t\t\t\tthis.first = item.next;\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.next = null;\r\n\t\t\t\titem.prev = this.last;\r\n\t\t\t\tlast.next = item;\r\n\r\n\t\t\t\tif (prev !== null) {\r\n\t\t\t\t\tprev.next = next;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (next !== null) {\r\n\t\t\t\t\tnext.prev = prev;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this.max > 0 && this.size === this.max) {\r\n\t\t\t\tthis.evict(true);\r\n\t\t\t}\r\n\r\n\t\t\titem = this.items[key] = {\r\n\t\t\t\texpiry: this.ttl > 0 ? Date.now() + this.ttl : this.ttl,\r\n\t\t\t\tkey: key,\r\n\t\t\t\tprev: this.last,\r\n\t\t\t\tnext: null,\r\n\t\t\t\tvalue\r\n\t\t\t};\r\n\r\n\t\t\tif (++this.size === 1) {\r\n\t\t\t\tthis.first = item;\r\n\t\t\t} else {\r\n\t\t\t\tthis.last.next = item;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.last = item;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tvalues (keys = this.keys()) {\r\n\t\treturn keys.map(key => this.get(key));\r\n\t}\r\n}\r\n\r\nfunction lru (max = 1000, ttl = 0, resetTtl = false) {\r\n\tif (isNaN(max) || max < 0) {\r\n\t\tthrow new TypeError(\"Invalid max value\");\r\n\t}\r\n\r\n\tif (isNaN(ttl) || ttl < 0) {\r\n\t\tthrow new TypeError(\"Invalid ttl value\");\r\n\t}\r\n\r\n\tif (typeof resetTtl !== \"boolean\") {\r\n\t\tthrow new TypeError(\"Invalid resetTtl value\");\r\n\t}\r\n\r\n\treturn new LRU(max, ttl, resetTtl);\r\n}export{LRU,lru};"],
  "mappings": "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",
  "names": []
}
