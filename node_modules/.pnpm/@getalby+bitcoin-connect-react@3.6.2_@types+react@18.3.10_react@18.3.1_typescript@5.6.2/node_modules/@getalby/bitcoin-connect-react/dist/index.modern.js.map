{"version":3,"file":"index.modern.js","sources":["../src/hooks/useCoreEvents.ts","../src/components/Button.tsx","../src/hooks/useOnPaid.ts","../src/components/PayButton.tsx","../src/components/Connect.tsx","../src/components/Payment.tsx"],"sourcesContent":["import React from 'react';\nimport {ComponentProps} from '../types/ComponentProps';\nimport {\n  onConnected,\n  onConnecting,\n  onDisconnected,\n  onModalClosed,\n  onModalOpened,\n} from '@getalby/bitcoin-connect';\n\nexport function useCoreEvents(props: ComponentProps) {\n  React.useEffect(() => {\n    if (props.onConnected) {\n      const unsub = onConnected(props.onConnected);\n\n      return () => {\n        unsub();\n      };\n    }\n    return () => {};\n  }, []);\n  React.useEffect(() => {\n    if (props.onConnecting) {\n      const unsub = onConnecting(props.onConnecting);\n\n      return () => {\n        unsub();\n      };\n    }\n    return () => {};\n  }, []);\n  React.useEffect(() => {\n    if (props.onDisconnected) {\n      const unsub = onDisconnected(props.onDisconnected);\n\n      return () => {\n        unsub();\n      };\n    }\n    return () => {};\n  }, []);\n  React.useEffect(() => {\n    if (props.onModalOpened) {\n      const unsub = onModalOpened(props.onModalOpened);\n\n      return () => {\n        unsub();\n      };\n    }\n    return () => {};\n  }, []);\n  React.useEffect(() => {\n    if (props.onModalClosed) {\n      const unsub = onModalClosed(props.onModalClosed);\n\n      return () => {\n        unsub();\n      };\n    }\n    return () => {};\n  }, []);\n}\n","import React from 'react';\nimport '@getalby/bitcoin-connect';\nimport {ComponentProps} from '../types/ComponentProps';\nimport {useCoreEvents} from '../hooks/useCoreEvents';\n\ntype ButtonProps = ComponentProps & {};\n\nexport const Button: React.FC<ButtonProps> = (props) => {\n  useCoreEvents(props);\n\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  return <bc-button />;\n};\n","import {SendPaymentResponse} from '@webbtc/webln-types';\nimport React from 'react';\n\nexport function useOnPaid(\n  onPaid?: (response: SendPaymentResponse) => void,\n  payment?: SendPaymentResponse\n) {\n  React.useEffect(() => {\n    const onPaidEventHandler = (event: Event) => {\n      onPaid?.((event as CustomEvent).detail);\n    };\n    window.addEventListener('bc:onpaid', onPaidEventHandler);\n\n    if (payment) {\n      // TODO: remove once bc-send-payment accepts preimage\n      window.dispatchEvent(\n        new CustomEvent('bc:onpaid', {\n          detail: payment,\n        })\n      );\n    }\n\n    return () => {\n      window.removeEventListener('bc:onpaid', onPaidEventHandler);\n    };\n  }, [onPaid, payment]);\n}\n","import React from 'react';\nimport '@getalby/bitcoin-connect';\nimport {PaymentMethods} from '@getalby/bitcoin-connect';\nimport {ComponentProps} from '../types/ComponentProps';\nimport {useCoreEvents} from '../hooks/useCoreEvents';\nimport {SendPaymentResponse} from '@webbtc/webln-types';\nimport {useOnPaid} from '../hooks/useOnPaid';\n\ntype PayButtonProps = ComponentProps & {\n  /**\n   * Bolt 11 invoice to pay\n   */\n  invoice?: string;\n  /**\n   * Supported payment methods in payment flow\n   */\n  paymentMethods?: PaymentMethods;\n  /**\n   * @param response response of the WebLN send payment call\n   */\n  onPaid?: (response: SendPaymentResponse) => void;\n  /**\n   * Mark that an external payment was made\n   */\n  payment?: SendPaymentResponse;\n\n  /**\n   * Listen to when the pay button is clicked.\n   * This is a good time to fetch an invoice to pay.\n   */\n  onClick?: () => void;\n};\n\nexport const PayButton: React.FC<PayButtonProps> = (props) => {\n  useCoreEvents(props);\n\n  const {onPaid, payment} = props;\n  useOnPaid(onPaid, payment);\n\n  return (\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    <bc-pay-button\n      invoice={props.invoice}\n      {...(props.paymentMethods\n        ? {'payment-methods': props.paymentMethods}\n        : {})}\n      preimage={payment?.preimage}\n      onClick={props.onClick}\n    />\n  );\n};\n","import React from 'react';\nimport '@getalby/bitcoin-connect';\nimport {ComponentProps} from '../types/ComponentProps';\nimport {useCoreEvents} from '../hooks/useCoreEvents';\n\ntype ConnectProps = ComponentProps & {};\n\nexport const Connect: React.FC<ConnectProps> = (props) => {\n  useCoreEvents(props);\n\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  return <bc-connect />;\n};\n","import React from 'react';\nimport '@getalby/bitcoin-connect';\nimport {ComponentProps} from '../types/ComponentProps';\nimport {useCoreEvents} from '../hooks/useCoreEvents';\nimport {SendPaymentResponse} from '@webbtc/webln-types';\nimport {useOnPaid} from '../hooks/useOnPaid';\nimport {PaymentMethods} from '@getalby/bitcoin-connect';\n\ntype PaymentProps = ComponentProps & {\n  /**\n   * Bolt 11 invoice to pay\n   */\n  invoice: string;\n  /**\n   * Supported payment methods in payment flow\n   */\n  paymentMethods?: PaymentMethods;\n  /**\n   * @param response response of the WebLN send payment call\n   */\n  onPaid?: (response: SendPaymentResponse) => void;\n  /**\n   * Mark that an external payment was made\n   */\n  payment?: SendPaymentResponse;\n};\n\nexport const Payment: React.FC<PaymentProps> = (props) => {\n  useCoreEvents(props);\n\n  const {onPaid, payment} = props;\n  useOnPaid(onPaid, payment);\n\n  return (\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    <bc-payment\n      invoice={props.invoice}\n      {...(props.paymentMethods\n        ? {'payment-methods': props.paymentMethods}\n        : {})}\n      {...(payment ? {paid: true} : {})}\n    />\n  );\n};\n"],"names":["useCoreEvents","props","React","useEffect","onConnected","unsub","onConnecting","onDisconnected","onModalOpened","onModalClosed","Button","useOnPaid","onPaid","payment","onPaidEventHandler","event","detail","window","addEventListener","dispatchEvent","CustomEvent","removeEventListener","PayButton","createElement","_extends","invoice","paymentMethods","preimage","onClick","Connect","Payment","paid"],"mappings":"mYAUgBA,EAAcC,GAC5BC,EAAMC,UAAU,KACd,GAAIF,EAAMG,YAAa,CACrB,MAAMC,EAAQD,EAAYH,EAAMG,aAEhC,MAAO,KACLC,IAEH,CACD,MAAO,MAAO,EACb,IACHH,EAAMC,UAAU,KACd,GAAIF,EAAMK,aAAc,CACtB,MAAMD,EAAQC,EAAaL,EAAMK,cAEjC,MAAO,KACLD,GACF,CACD,CACD,MAAO,QACN,IACHH,EAAMC,UAAU,KACd,GAAIF,EAAMM,eAAgB,CACxB,MAAMF,EAAQE,EAAeN,EAAMM,gBAEnC,MAAO,KACLF,GAAK,CAER,CACD,MAAO,MACT,EAAG,IACHH,EAAMC,UAAU,KACd,GAAIF,EAAMO,cAAe,CACvB,MAAMH,EAAQG,EAAcP,EAAMO,eAElC,MAAO,KACLH,IAEH,CACD,MAAO,MAAO,EACb,IACHH,EAAMC,UAAU,KACd,GAAIF,EAAMQ,cAAe,CACvB,MAAMJ,EAAQI,EAAcR,EAAMQ,eAElC,MAAO,KACLJ,GACF,CACD,CACD,MAAO,QACN,GACL,CCtDa,MAAAK,EAAiCT,IAC5CD,EAAcC,gBAIPC,gRCTOS,EACdC,EACAC,GAEAX,EAAMC,UAAU,KACd,MAAMW,EAAsBC,UAC1BH,GAAAA,EAAUG,EAAsBC,OAAM,EAaxC,OAXAC,OAAOC,iBAAiB,YAAaJ,GAEjCD,GAEFI,OAAOE,cACL,IAAIC,YAAY,YAAa,CAC3BJ,OAAQH,KAKP,KACLI,OAAOI,oBAAoB,YAAaP,EAC1C,CAAA,EACC,CAACF,EAAQC,GACd,CCOa,MAAAS,EAAuCrB,IAClDD,EAAcC,GAEd,MAAMW,OAACA,EAAMC,QAAEA,GAAWZ,EAG1B,OAFAU,EAAUC,EAAQC,gBAKhBX,EACEqB,cAAA,gBAAAC,GAAAC,QAASxB,EAAMwB,SACVxB,EAAMyB,eACP,CAAC,kBAAmBzB,EAAMyB,gBAC1B,CAAA,GACJC,SAAUd,MAAAA,OAAAA,EAAAA,EAASc,SACnBC,QAAS3B,EAAM2B,UAAO,ECzCfC,EAAmC5B,IAC9CD,EAAcC,gBAIPC,oCCeI4B,EAAmC7B,IAC9CD,EAAcC,GAEd,MAAMW,OAACA,EAAMC,QAAEA,GAAWZ,EAG1B,OAFAU,EAAUC,EAAQC,gBAKhBX,EACEqB,cAAA,aAAAC,GAAAC,QAASxB,EAAMwB,SACVxB,EAAMyB,eACP,CAAC,kBAAmBzB,EAAMyB,gBAC1B,CAAE,EACDb,EAAU,CAACkB,MAAM,GAAQ,CAAA,GAC9B"}