{
  "version": 3,
  "sources": ["../../.pnpm/applesauce-core@0.7.0_typescript@5.6.2/node_modules/applesauce-core/dist/helpers/index.js", "../../.pnpm/applesauce-core@0.7.0_typescript@5.6.2/node_modules/applesauce-core/dist/helpers/filter.js", "../../.pnpm/applesauce-core@0.7.0_typescript@5.6.2/node_modules/applesauce-core/dist/helpers/time.js", "../../.pnpm/applesauce-core@0.7.0_typescript@5.6.2/node_modules/applesauce-core/dist/helpers/tags.js", "../../.pnpm/applesauce-core@0.7.0_typescript@5.6.2/node_modules/applesauce-core/dist/helpers/lru.js"],
  "sourcesContent": ["export * from \"./profile.js\";\nexport * from \"./relays.js\";\nexport * from \"./event.js\";\nexport * from \"./filter.js\";\nexport * from \"./mailboxes.js\";\nexport * from \"./threading.js\";\nexport * from \"./pointers.js\";\nexport * from \"./string.js\";\nexport * from \"./time.js\";\nexport * from \"./tags.js\";\nexport * from \"./emoji.js\";\nexport * from \"./lru.js\";\nexport * from \"./hashtag.js\";\nexport * from \"./url.js\";\n", "import { getIndexableTags } from \"./event.js\";\n/**\n * Copied from nostr-tools and modified to use getIndexableTags\n * @see https://github.com/nbd-wtf/nostr-tools/blob/a61cde77eacc9518001f11d7f67f1a50ae05fd80/filter.ts\n */\nexport function matchFilter(filter, event) {\n    if (filter.ids && filter.ids.indexOf(event.id) === -1) {\n        return false;\n    }\n    if (filter.kinds && filter.kinds.indexOf(event.kind) === -1) {\n        return false;\n    }\n    if (filter.authors && filter.authors.indexOf(event.pubkey) === -1) {\n        return false;\n    }\n    for (let f in filter) {\n        if (f[0] === \"#\") {\n            let tagName = f.slice(1);\n            let values = filter[`#${tagName}`];\n            if (values) {\n                const tags = getIndexableTags(event);\n                if (values.some((v) => !tags.has(tagName + \":\" + v)))\n                    return false;\n            }\n        }\n    }\n    if (filter.since && event.created_at < filter.since)\n        return false;\n    if (filter.until && event.created_at > filter.until)\n        return false;\n    return true;\n}\n/** Copied from nostr-tools */\nexport function matchFilters(filters, event) {\n    for (let i = 0; i < filters.length; i++) {\n        if (matchFilter(filters[i], event)) {\n            return true;\n        }\n    }\n    return false;\n}\n", "/** Returns the current unix timestamp */\nexport function unixNow() {\n    return Math.round(Date.now() / 1000);\n}\n", "export function isETag(tag) {\n    return tag[0] === \"e\" && tag[1] !== undefined;\n}\nexport function isPTag(tag) {\n    return tag[0] === \"p\" && tag[1] !== undefined;\n}\nexport function isRTag(tag) {\n    return tag[0] === \"r\" && tag[1] !== undefined;\n}\nexport function isDTag(tag) {\n    return tag[0] === \"d\" && tag[1] !== undefined;\n}\nexport function isATag(tag) {\n    return tag[0] === \"a\" && tag[1] !== undefined;\n}\nexport function isTTag(tag) {\n    return tag[0] === \"a\" && tag[1] !== undefined;\n}\n", "/**\n * Copied from tiny-lru and modified to support typescript\n * @see https://github.com/avoidwork/tiny-lru/blob/master/src/lru.js\n */\nexport class LRU {\n    first = null;\n    items = Object.create(null);\n    last = null;\n    max;\n    resetTtl;\n    size;\n    ttl;\n    constructor(max = 0, ttl = 0, resetTtl = false) {\n        this.first = null;\n        this.items = Object.create(null);\n        this.last = null;\n        this.max = max;\n        this.resetTtl = resetTtl;\n        this.size = 0;\n        this.ttl = ttl;\n    }\n    clear() {\n        this.first = null;\n        this.items = Object.create(null);\n        this.last = null;\n        this.size = 0;\n        return this;\n    }\n    delete(key) {\n        if (this.has(key)) {\n            const item = this.items[key];\n            delete this.items[key];\n            this.size--;\n            if (item.prev !== null) {\n                item.prev.next = item.next;\n            }\n            if (item.next !== null) {\n                item.next.prev = item.prev;\n            }\n            if (this.first === item) {\n                this.first = item.next;\n            }\n            if (this.last === item) {\n                this.last = item.prev;\n            }\n        }\n        return this;\n    }\n    entries(keys = this.keys()) {\n        return keys.map((key) => [key, this.get(key)]);\n    }\n    evict(bypass = false) {\n        if (bypass || this.size > 0) {\n            const item = this.first;\n            delete this.items[item.key];\n            if (--this.size === 0) {\n                this.first = null;\n                this.last = null;\n            }\n            else {\n                this.first = item.next;\n                this.first.prev = null;\n            }\n        }\n        return this;\n    }\n    expiresAt(key) {\n        let result;\n        if (this.has(key)) {\n            result = this.items[key].expiry;\n        }\n        return result;\n    }\n    get(key) {\n        let result;\n        if (this.has(key)) {\n            const item = this.items[key];\n            if (this.ttl > 0 && item.expiry <= Date.now()) {\n                this.delete(key);\n            }\n            else {\n                result = item.value;\n                this.set(key, result, true);\n            }\n        }\n        return result;\n    }\n    has(key) {\n        return key in this.items;\n    }\n    keys() {\n        const result = [];\n        let x = this.first;\n        while (x !== null) {\n            result.push(x.key);\n            x = x.next;\n        }\n        return result;\n    }\n    set(key, value, bypass = false, resetTtl = this.resetTtl) {\n        let item;\n        if (bypass || this.has(key)) {\n            item = this.items[key];\n            item.value = value;\n            if (bypass === false && resetTtl) {\n                item.expiry = this.ttl > 0 ? Date.now() + this.ttl : this.ttl;\n            }\n            if (this.last !== item) {\n                const last = this.last, next = item.next, prev = item.prev;\n                if (this.first === item) {\n                    this.first = item.next;\n                }\n                item.next = null;\n                item.prev = this.last;\n                last.next = item;\n                if (prev !== null) {\n                    prev.next = next;\n                }\n                if (next !== null) {\n                    next.prev = prev;\n                }\n            }\n        }\n        else {\n            if (this.max > 0 && this.size === this.max) {\n                this.evict(true);\n            }\n            item = this.items[key] = {\n                expiry: this.ttl > 0 ? Date.now() + this.ttl : this.ttl,\n                key: key,\n                prev: this.last,\n                next: null,\n                value,\n            };\n            if (++this.size === 1) {\n                this.first = item;\n            }\n            else {\n                this.last.next = item;\n            }\n        }\n        this.last = item;\n        return this;\n    }\n    values(keys = this.keys()) {\n        return keys.map((key) => this.get(key));\n    }\n}\n"],
  "mappings": "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",
  "names": []
}
