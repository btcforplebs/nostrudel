{"version":3,"file":"emoji-pack-menu-DlitT7Eb.js","sources":["../../src/views/emoji-packs/components/emoji-pack-favorite-button.tsx","../../src/views/emoji-packs/components/emoji-pack-menu.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { IconButton, IconButtonProps } from \"@chakra-ui/react\";\nimport dayjs from \"dayjs\";\n\nimport { DraftNostrEvent, NostrEvent } from \"../../../types/nostr-event\";\nimport { StarEmptyIcon, StarFullIcon } from \"../../../components/icons\";\nimport { getEventCoordinate } from \"../../../helpers/nostr/event\";\nimport { USER_EMOJI_LIST_KIND } from \"../../../helpers/nostr/emoji-packs\";\nimport useFavoriteEmojiPacks from \"../../../hooks/use-favorite-emoji-packs\";\nimport { listAddCoordinate, listRemoveCoordinate } from \"../../../helpers/nostr/lists\";\nimport { usePublishEvent } from \"../../../providers/global/publish-provider\";\n\nexport default function EmojiPackFavoriteButton({\n  pack,\n  ...props\n}: { pack: NostrEvent } & Omit<IconButtonProps, \"children\" | \"aria-label\" | \"isLoading\" | \"onClick\">) {\n  const publish = usePublishEvent();\n  const favoritePacks = useFavoriteEmojiPacks();\n  const coordinate = getEventCoordinate(pack);\n  const isFavorite = favoritePacks?.tags.some((t) => t[1] === coordinate);\n  const [loading, setLoading] = useState(false);\n\n  const handleClick = async () => {\n    const prev: DraftNostrEvent = favoritePacks || {\n      kind: USER_EMOJI_LIST_KIND,\n      created_at: dayjs().unix(),\n      content: \"\",\n      tags: [],\n    };\n\n    setLoading(true);\n    const draft = isFavorite ? listRemoveCoordinate(prev, coordinate) : listAddCoordinate(prev, coordinate);\n    await publish(isFavorite ? \"Unfavorite Emoji pack\" : \"Favorite emoji pack\", draft);\n    setLoading(false);\n  };\n\n  return (\n    <IconButton\n      icon={isFavorite ? <StarFullIcon /> : <StarEmptyIcon />}\n      aria-label={isFavorite ? \"Unfavorite\" : \"Favorite\"}\n      title={isFavorite ? \"Unfavorite\" : \"Favorite\"}\n      onClick={handleClick}\n      isLoading={loading}\n      color={isFavorite ? \"yellow.400\" : undefined}\n      {...props}\n    />\n  );\n}\n","import { NostrEvent } from \"../../../types/nostr-event\";\nimport { DotsMenuButton, MenuIconButtonProps } from \"../../../components/dots-menu-button\";\nimport OpenInAppMenuItem from \"../../../components/common-menu-items/open-in-app\";\nimport DeleteEventMenuItem from \"../../../components/common-menu-items/delete-event\";\nimport CopyEmbedCodeMenuItem from \"../../../components/common-menu-items/copy-embed-code\";\nimport DebugEventMenuItem from \"../../../components/debug-modal/debug-event-menu-item\";\n\nexport default function EmojiPackMenu({\n  pack,\n  ...props\n}: { pack: NostrEvent } & Omit<MenuIconButtonProps, \"children\">) {\n  return (\n    <>\n      <DotsMenuButton {...props}>\n        <OpenInAppMenuItem event={pack} />\n        <CopyEmbedCodeMenuItem event={pack} />\n        <DeleteEventMenuItem event={pack} label=\"Delete Pack\" />\n        <DebugEventMenuItem event={pack} />\n      </DotsMenuButton>\n    </>\n  );\n}\n"],"names":["EmojiPackFavoriteButton","pack","props","publish","usePublishEvent","favoritePacks","useFavoriteEmojiPacks","coordinate","getEventCoordinate","isFavorite","t","loading","setLoading","useState","handleClick","prev","USER_EMOJI_LIST_KIND","dayjs","draft","listRemoveCoordinate","listAddCoordinate","jsx","IconButton","StarFullIcon","StarEmptyIcon","EmojiPackMenu","Fragment","jsxs","DotsMenuButton","OpenInAppMenuItem","CopyEmbedCodeMenuItem","DeleteEventMenuItem","DebugEventMenuItem"],"mappings":"+JAYA,SAAwBA,EAAwB,CAC9C,KAAAC,EACA,GAAGC,CACL,EAAsG,CACpG,MAAMC,EAAUC,IACVC,EAAgBC,IAChBC,EAAaC,EAAmBP,CAAI,EACpCQ,EAAaJ,GAAA,YAAAA,EAAe,KAAK,KAAMK,GAAMA,EAAE,CAAC,IAAMH,GACtD,CAACI,EAASC,CAAU,EAAIC,WAAS,EAAK,EAEtCC,EAAc,SAAY,CAC9B,MAAMC,EAAwBV,GAAiB,CAC7C,KAAMW,EACN,WAAYC,EAAM,EAAE,KAAK,EACzB,QAAS,GACT,KAAM,CAAC,CAAA,EAGTL,EAAW,EAAI,EACT,MAAAM,EAAQT,EAAaU,EAAqBJ,EAAMR,CAAU,EAAIa,EAAkBL,EAAMR,CAAU,EACtG,MAAMJ,EAAQM,EAAa,wBAA0B,sBAAuBS,CAAK,EACjFN,EAAW,EAAK,CAAA,EAIhB,OAAAS,EAAA,IAACC,EAAA,CACC,KAAMb,EAAaY,EAAAA,IAACE,EAAa,CAAA,CAAA,QAAMC,EAAc,EAAA,EACrD,aAAYf,EAAa,aAAe,WACxC,MAAOA,EAAa,aAAe,WACnC,QAASK,EACT,UAAWH,EACX,MAAOF,EAAa,aAAe,OAClC,GAAGP,CAAA,CAAA,CAGV,CCxCA,SAAwBuB,EAAc,CACpC,KAAAxB,EACA,GAAGC,CACL,EAAiE,CAC/D,OAEImB,EAAA,IAAAK,EAAA,SAAA,CAAA,SAAAC,EAAA,KAACC,EAAgB,CAAA,GAAG1B,EAClB,SAAA,CAACmB,EAAAA,IAAAQ,EAAA,CAAkB,MAAO5B,CAAM,CAAA,EAChCoB,EAAAA,IAACS,EAAsB,CAAA,MAAO7B,CAAM,CAAA,EACnCoB,EAAA,IAAAU,EAAA,CAAoB,MAAO9B,EAAM,MAAM,cAAc,EACtDoB,EAAAA,IAACW,EAAmB,CAAA,MAAO/B,CAAM,CAAA,CAAA,CACnC,CAAA,CACF,CAAA,CAEJ"}