{"version":3,"file":"compare-CSJBBvqo.js","sources":["../../src/views/wiki/compare.tsx"],"sourcesContent":["import { NostrEvent } from \"nostr-tools\";\nimport {\n  Alert,\n  AlertIcon,\n  Box,\n  ButtonGroup,\n  Divider,\n  Flex,\n  Heading,\n  IconButton,\n  Spinner,\n  Text,\n} from \"@chakra-ui/react\";\nimport { Navigate, useParams, Link as RouterLink } from \"react-router-dom\";\n\nimport useReplaceableEvent from \"../../hooks/use-replaceable-event\";\nimport VerticalPageLayout from \"../../components/vertical-page-layout\";\nimport { WIKI_PAGE_KIND, getPageTitle } from \"../../helpers/nostr/wiki\";\nimport Timestamp from \"../../components/timestamp\";\nimport WikiPageHeader from \"./components/wiki-page-header\";\nimport DiffViewer from \"../../components/diff/diff-viewer\";\nimport { useBreakpointValue } from \"../../providers/global/breakpoint-provider\";\nimport MarkdownContent from \"./components/markdown\";\nimport { WIKI_RELAYS } from \"../../const\";\nimport UserName from \"../../components/user/user-name\";\nimport WikiPageMenu from \"./components/wiki-page-menu\";\nimport { ExternalLinkIcon } from \"../../components/icons\";\nimport useShareableEventAddress from \"../../hooks/use-shareable-event-address\";\n\nfunction WikiComparePage({ base, diff }: { base: NostrEvent; diff: NostrEvent }) {\n  const vertical = useBreakpointValue({ base: true, lg: false }) ?? false;\n  const identical = base.content.trim() === diff.content.trim();\n  const baseAddress = useShareableEventAddress(base);\n  const diffAddress = useShareableEventAddress(diff);\n\n  return (\n    <VerticalPageLayout>\n      <WikiPageHeader />\n\n      <Flex gap=\"4\" direction={vertical ? \"column\" : \"row\"}>\n        <Box flex={1}>\n          <ButtonGroup float=\"right\" size=\"sm\">\n            <IconButton\n              as={RouterLink}\n              to={`/wiki/page/${baseAddress}`}\n              icon={<ExternalLinkIcon />}\n              aria-label=\"Open Page\"\n            />\n            <WikiPageMenu page={base} aria-label=\"Page Optinos\" />\n          </ButtonGroup>\n          <Heading>\n            <UserName pubkey={base.pubkey} />\n          </Heading>\n          <Text>\n            {getPageTitle(base)} - <Timestamp timestamp={base.created_at} />\n          </Text>\n        </Box>\n        <Box flex={1}>\n          <ButtonGroup float=\"right\" size=\"sm\">\n            <IconButton\n              as={RouterLink}\n              to={`/wiki/page/${diffAddress}`}\n              icon={<ExternalLinkIcon />}\n              aria-label=\"Open Page\"\n            />\n            <WikiPageMenu page={diff} aria-label=\"Page Optinos\" />\n          </ButtonGroup>\n          <Heading>\n            <UserName pubkey={diff.pubkey} />\n          </Heading>\n          <Text>\n            {getPageTitle(diff)} - <Timestamp timestamp={diff.created_at} />\n          </Text>\n        </Box>\n      </Flex>\n      <Divider />\n      {identical ? (\n        <>\n          <Alert status=\"info\">\n            <AlertIcon />\n            Both versions are identical\n          </Alert>\n          <MarkdownContent event={base} />\n        </>\n      ) : (\n        <DiffViewer oldValue={base.content} newValue={diff.content} splitView={!vertical} />\n      )}\n    </VerticalPageLayout>\n  );\n}\n\nexport default function WikiCompareView() {\n  const { topic, a, b } = useParams();\n  if (!topic || !a || !b) return <Navigate to=\"/wiki\" />;\n\n  const base = useReplaceableEvent({ kind: WIKI_PAGE_KIND, identifier: topic, pubkey: a }, WIKI_RELAYS);\n  const diff = useReplaceableEvent({ kind: WIKI_PAGE_KIND, identifier: topic, pubkey: b }, WIKI_RELAYS);\n\n  if (!base || !diff) return <Spinner />;\n  return <WikiComparePage base={base} diff={diff} />;\n}\n"],"names":["WikiComparePage","base","diff","vertical","useBreakpointValue","identical","baseAddress","useShareableEventAddress","diffAddress","VerticalPageLayout","jsx","WikiPageHeader","Flex","jsxs","Box","ButtonGroup","IconButton","RouterLink","ExternalLinkIcon","WikiPageMenu","Heading","UserName","Text","getPageTitle","Timestamp","Divider","Fragment","Alert","AlertIcon","MarkdownContent","DiffViewer","WikiCompareView","topic","b","useParams","Navigate","useReplaceableEvent","WIKI_PAGE_KIND","WIKI_RELAYS","Spinner"],"mappings":"gUA6BA,SAASA,EAAgB,CAAE,KAAAC,EAAM,KAAAC,GAAgD,CACzE,MAAAC,EAAWC,EAAmB,CAAE,KAAM,GAAM,GAAI,GAAO,GAAK,GAC5DC,EAAYJ,EAAK,QAAQ,KAAW,IAAAC,EAAK,QAAQ,OACjDI,EAAcC,EAAyBN,CAAI,EAC3CO,EAAcD,EAAyBL,CAAI,EAEjD,cACGO,EACC,CAAA,SAAA,CAAAC,EAAA,IAACC,EAAe,EAAA,SAEfC,EAAK,CAAA,IAAI,IAAI,UAAWT,EAAW,SAAW,MAC7C,SAAA,CAACU,EAAAA,KAAAC,EAAA,CAAI,KAAM,EACT,SAAA,CAAAD,EAAA,KAACE,EAAY,CAAA,MAAM,QAAQ,KAAK,KAC9B,SAAA,CAAAL,EAAA,IAACM,EAAA,CACC,GAAIC,EACJ,GAAI,cAAcX,CAAW,GAC7B,WAAOY,EAAiB,EAAA,EACxB,aAAW,WAAA,CACb,EACCR,EAAA,IAAAS,EAAA,CAAa,KAAMlB,EAAM,aAAW,eAAe,CAAA,EACtD,QACCmB,EACC,CAAA,SAAAV,MAACW,GAAS,OAAQpB,EAAK,MAAQ,CAAA,EACjC,SACCqB,EACE,CAAA,SAAA,CAAAC,EAAatB,CAAI,EAAE,MAAIS,EAAAA,IAAAc,EAAA,CAAU,UAAWvB,EAAK,UAAY,CAAA,CAAA,EAChE,CAAA,EACF,EACAY,EAAAA,KAACC,EAAI,CAAA,KAAM,EACT,SAAA,CAAAD,EAAA,KAACE,EAAY,CAAA,MAAM,QAAQ,KAAK,KAC9B,SAAA,CAAAL,EAAA,IAACM,EAAA,CACC,GAAIC,EACJ,GAAI,cAAcT,CAAW,GAC7B,WAAOU,EAAiB,EAAA,EACxB,aAAW,WAAA,CACb,EACCR,EAAA,IAAAS,EAAA,CAAa,KAAMjB,EAAM,aAAW,eAAe,CAAA,EACtD,QACCkB,EACC,CAAA,SAAAV,MAACW,GAAS,OAAQnB,EAAK,MAAQ,CAAA,EACjC,SACCoB,EACE,CAAA,SAAA,CAAAC,EAAarB,CAAI,EAAE,MAAIQ,EAAAA,IAAAc,EAAA,CAAU,UAAWtB,EAAK,UAAY,CAAA,CAAA,EAChE,CAAA,EACF,CAAA,EACF,QACCuB,EAAQ,EAAA,EACRpB,EAEGQ,EAAA,KAAAa,WAAA,CAAA,SAAA,CAACb,EAAAA,KAAAc,EAAA,CAAM,OAAO,OACZ,SAAA,CAAAjB,EAAA,IAACkB,EAAU,EAAA,EAAE,6BAAA,EAEf,EACAlB,EAAAA,IAACmB,EAAgB,CAAA,MAAO5B,CAAM,CAAA,CAChC,CAAA,CAAA,EAECS,EAAA,IAAAoB,EAAA,CAAW,SAAU7B,EAAK,QAAS,SAAUC,EAAK,QAAS,UAAW,CAACC,CAAU,CAAA,CAEtF,CAAA,CAAA,CAEJ,CAEA,SAAwB4B,GAAkB,CACxC,KAAM,CAAE,MAAAC,EAAO,EAAG,EAAAC,GAAMC,EAAU,EAC9B,GAAA,CAACF,GAAS,CAAC,GAAK,CAACC,EAAU,OAAAvB,EAAA,IAACyB,EAAS,CAAA,GAAG,OAAQ,CAAA,EAE9C,MAAAlC,EAAOmC,EAAoB,CAAE,KAAMC,EAAgB,WAAYL,EAAO,OAAQ,CAAE,EAAGM,CAAW,EAC9FpC,EAAOkC,EAAoB,CAAE,KAAMC,EAAgB,WAAYL,EAAO,OAAQC,CAAE,EAAGK,CAAW,EAEpG,MAAI,CAACrC,GAAQ,CAACC,QAAcqC,EAAQ,CAAA,CAAA,EAC7B7B,EAAA,IAACV,EAAgB,CAAA,KAAAC,EAAY,KAAAC,CAAY,CAAA,CAClD"}