{"version":3,"file":"dvm-name--L8vhJB8.js","sources":["../../src/hooks/use-dvm-metadata.ts","../../src/views/discovery/dvm-feed/components/dvm-avatar.tsx","../../src/views/discovery/dvm-feed/components/dvm-name.tsx"],"sourcesContent":["import { useMemo } from \"react\";\nimport type { AddressPointer } from \"nostr-tools/nip19\";\n\nimport useReplaceableEvent from \"./use-replaceable-event\";\nimport { parseDVMMetadata } from \"../helpers/nostr/dvm\";\n\nexport default function useDVMMetadata(pointer: AddressPointer) {\n  const appMetadataEvent = useReplaceableEvent(pointer);\n  return useMemo(() => appMetadataEvent && parseDVMMetadata(appMetadataEvent), [appMetadataEvent]);\n}\n","import { forwardRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { nip19 } from \"nostr-tools\";\nimport { Box, BoxProps } from \"@chakra-ui/react\";\n\nimport useUserProfile from \"../../../../hooks/use-user-profile\";\n\nimport { AddressPointer } from \"nostr-tools/nip19\";\nimport useDVMMetadata from \"../../../../hooks/use-dvm-metadata\";\n\ntype DVMAvatarProps = {\n  pointer: AddressPointer;\n  noProxy?: boolean;\n} & Omit<BoxProps, \"children\">;\n\nexport const DVMAvatar = forwardRef<HTMLDivElement, DVMAvatarProps>(({ pointer, noProxy, ...props }, ref) => {\n  const dvmMetadata = useDVMMetadata(pointer);\n  const userMetadata = useUserProfile(pointer.pubkey);\n  const image = dvmMetadata?.image || userMetadata?.picture || \"\";\n\n  return (\n    <Box\n      aspectRatio={1}\n      backgroundImage={image}\n      backgroundRepeat=\"no-repeat\"\n      backgroundPosition=\"center\"\n      backgroundSize=\"cover\"\n      borderRadius=\"lg\"\n      ref={ref}\n      {...props}\n    />\n  );\n});\n\nexport const DVMAvatarLink = forwardRef<HTMLAnchorElement, DVMAvatarProps>(({ pointer, ...props }, ref) => {\n  return (\n    <Link to={`/u/${nip19.npubEncode(pointer.pubkey)}`} ref={ref}>\n      <DVMAvatar pointer={pointer} {...props} />\n    </Link>\n  );\n});\n\nexport default DVMAvatar;\n","import { Link, LinkProps, Text, TextProps } from \"@chakra-ui/react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { nip19 } from \"nostr-tools\";\n\nimport useUserProfile from \"../../../../hooks/use-user-profile\";\nimport { getDisplayName } from \"../../../../helpers/nostr/user-metadata\";\nimport { AddressPointer } from \"nostr-tools/nip19\";\nimport useDVMMetadata from \"../../../../hooks/use-dvm-metadata\";\n\nexport function DVMName({\n  pointer,\n  as = \"span\",\n  ...props\n}: TextProps & {\n  pointer: AddressPointer;\n}) {\n  const dvmMetadata = useDVMMetadata(pointer);\n  const metadata = useUserProfile(pointer.pubkey);\n\n  return (\n    <Text as={as} {...props}>\n      {dvmMetadata?.name || getDisplayName(metadata, pointer.pubkey)}\n    </Text>\n  );\n}\n\nexport default function DVMLink({\n  pointer,\n  ...props\n}: LinkProps & {\n  pointer: AddressPointer;\n}) {\n  return (\n    <Link as={RouterLink} to={`/u/${nip19.npubEncode(pointer.pubkey)}`} whiteSpace=\"nowrap\" {...props}>\n      <DVMName pointer={pointer} />\n    </Link>\n  );\n}\n"],"names":["useDVMMetadata","pointer","appMetadataEvent","useReplaceableEvent","useMemo","parseDVMMetadata","DVMAvatar","forwardRef","noProxy","props","ref","dvmMetadata","userMetadata","useUserProfile","image","jsx","Box","DVMAvatarLink","Link","nip19","DVMName","as","metadata","Text","getDisplayName","DVMLink","RouterLink"],"mappings":"mHAMA,SAAwBA,EAAeC,EAAyB,CACxD,MAAAC,EAAmBC,EAAoBF,CAAO,EAC7C,OAAAG,EAAAA,QAAQ,IAAMF,GAAoBG,EAAiBH,CAAgB,EAAG,CAACA,CAAgB,CAAC,CACjG,CCMa,MAAAI,EAAYC,aAA2C,CAAC,CAAE,QAAAN,EAAS,QAAAO,EAAS,GAAGC,CAAM,EAAGC,IAAQ,CACrG,MAAAC,EAAcX,EAAeC,CAAO,EACpCW,EAAeC,EAAeZ,EAAQ,MAAM,EAC5Ca,GAAQH,GAAA,YAAAA,EAAa,SAASC,GAAA,YAAAA,EAAc,UAAW,GAG3D,OAAAG,EAAA,IAACC,EAAA,CACC,YAAa,EACb,gBAAiBF,EACjB,iBAAiB,YACjB,mBAAmB,SACnB,eAAe,QACf,aAAa,KACb,IAAAJ,EACC,GAAGD,CAAA,CAAA,CAGV,CAAC,EAEYQ,EAAgBV,aAA8C,CAAC,CAAE,QAAAN,EAAS,GAAGQ,GAASC,UAE9FQ,EAAK,CAAA,GAAI,MAAMC,EAAM,WAAWlB,EAAQ,MAAM,CAAC,GAAI,IAAAS,EAClD,SAACK,EAAAA,IAAAT,EAAA,CAAU,QAAAL,EAAmB,GAAGQ,EAAO,CAC1C,CAAA,CAEH,EC/BM,SAASW,EAAQ,CACtB,QAAAnB,EACA,GAAAoB,EAAK,OACL,GAAGZ,CACL,EAEG,CACK,MAAAE,EAAcX,EAAeC,CAAO,EACpCqB,EAAWT,EAAeZ,EAAQ,MAAM,EAG5C,OAAAc,EAAA,IAACQ,EAAK,CAAA,GAAAF,EAAS,GAAGZ,EACf,UAAaE,GAAA,YAAAA,EAAA,OAAQa,EAAeF,EAAUrB,EAAQ,MAAM,CAC/D,CAAA,CAEJ,CAEA,SAAwBwB,EAAQ,CAC9B,QAAAxB,EACA,GAAGQ,CACL,EAEG,CACD,aACGS,EAAK,CAAA,GAAIQ,EAAY,GAAI,MAAMP,EAAM,WAAWlB,EAAQ,MAAM,CAAC,GAAI,WAAW,SAAU,GAAGQ,EAC1F,SAACM,EAAA,IAAAK,EAAA,CAAQ,QAAAnB,CAAkB,CAAA,CAC7B,CAAA,CAEJ"}