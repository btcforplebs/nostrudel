import{dx as D,j as s,cQ as $,cR as W,dK as _,cT as z,aw as H,dL as O,dM as B,cV as U,k as u,u as j,dN as g,C as b,L as y,$ as k,dO as C,aZ as I,T as c,t as P,Z as R,l as L,b as l,F as M,dP as G,dQ as Q,e as Z,cy as q,c_ as K,dR as h,cq as V,dS as v,r as J,a9 as X,H as Y,a as m,da as ss,aN as es}from"./index-C6wlVu-O.js";function w({event:e,approvals:t,...o}){const a=D();return s.jsx(s.Fragment,{children:s.jsxs($,{...o,children:[s.jsx(W,{event:e}),s.jsx(_,{event:e}),s.jsx(z,{onClick:()=>{const n=H.noteEncode(e.id);navigator.clipboard?navigator.clipboard.writeText(n):a({description:n,isClosable:!0,duration:null})},icon:s.jsx(O,{}),children:"Copy Note ID"}),s.jsx(B,{event:e,label:"Delete Post"}),s.jsx(U,{event:e})]})})}function ts({approval:e}){const t=j(e);return s.jsx(es,{pubkey:e.pubkey,ref:t,size:"xs"})}function E({event:e}){const t=h(e),o=V(e),a=v(),n=`/n/${o}`,r=J.useCallback(x=>{x.preventDefault(),a(n)},[a,n]);return t?s.jsx(X,{px:"2",pt:"4",pb:"0",overflow:"hidden",children:s.jsx(Y,{size:"md",overflow:"hidden",isTruncated:!0,children:s.jsx(m,{as:l,to:n,onClick:r,children:h(e)})})}):s.jsx(m,{as:l,to:n,onClick:r})}function T({approvals:e}){return s.jsxs(s.Fragment,{children:[s.jsx(c,{fontSize:"sm",children:"Approved by"}),s.jsx(ss,{children:e.map(t=>s.jsx(ts,{approval:t},t.id))})]})}function ns({event:e,approvals:t,showCommunity:o,...a}){const n=j(e),r=g(e);return s.jsxs(b,{as:y,ref:n,...a,children:[s.jsx(E,{event:e}),s.jsx(k,{p:"2",children:s.jsx(C,{event:e,maxLength:96})}),s.jsxs(I,{display:"flex",gap:"2",alignItems:"center",p:"2",flexWrap:"wrap",children:[s.jsxs(c,{children:["Posted ",P.unix(e.created_at).fromNow()," by ",s.jsx(R,{pubkey:e.pubkey,fontWeight:"bold"})]}),o&&r&&s.jsxs(c,{children:["to"," ",s.jsx(L,{as:l,to:`/c/${r.identifier}/${r.pubkey}`,fontWeight:"bold",children:r.identifier})]}),s.jsxs(M,{gap:"2",alignItems:"center",ml:"auto",children:[t.length>0&&s.jsx(T,{approvals:t}),s.jsx(w,{event:e,approvals:t,"aria-label":"More Options",size:"xs",variant:"ghost"})]})]})]})}function f({event:e,approvals:t,showCommunity:o,...a}){const n=G(e),[r,x,p]=e.tags.find(Q)??[],N=Z(p?[p]:[]),S=q(x,N),i=n||S,F=j(i),A=K();if(i&&A(i))return;const d=g(e);return s.jsxs(b,{as:y,ref:F,...a,children:[i&&s.jsxs(s.Fragment,{children:[s.jsx(E,{event:i}),s.jsx(k,{p:"2",children:s.jsx(C,{event:i,maxLength:96})})]}),s.jsxs(I,{display:"flex",gap:"2",alignItems:"center",p:"2",flexWrap:"wrap",children:[s.jsxs(c,{children:["Shared ",P.unix(e.created_at).fromNow()," by ",s.jsx(R,{pubkey:e.pubkey,fontWeight:"bold"})]}),o&&d&&s.jsxs(c,{children:["to"," ",s.jsx(L,{as:l,to:`/c/${d.identifier}/${d.pubkey}`,fontWeight:"bold",children:d.identifier})]}),s.jsxs(M,{gap:"2",alignItems:"center",ml:"auto",children:[t.length>0&&s.jsx(T,{approvals:t}),s.jsx(w,{event:e,approvals:t,"aria-label":"More Options",size:"xs",variant:"ghost"})]})]})]})}function rs({event:e,...t}){switch(e.kind){case u.ShortTextNote:return s.jsx(ns,{event:e,...t});case u.Repost:return s.jsx(f,{event:e,...t});case u.GenericRepost:return s.jsx(f,{event:e,...t})}return null}export{rs as C};
//# sourceMappingURL=community-post-BPGddPsB.js.map
