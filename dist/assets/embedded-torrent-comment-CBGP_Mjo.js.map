{"version":3,"file":"embedded-torrent-comment-CBGP_Mjo.js","sources":["../../src/components/embed-event/event-types/embedded-torrent-comment.tsx"],"sourcesContent":["import { Card, CardProps, Flex, LinkBox, Spacer, Text } from \"@chakra-ui/react\";\nimport { Link as RouterLink } from \"react-router-dom\";\n\nimport { NostrEvent } from \"../../../types/nostr-event\";\nimport UserAvatarLink from \"../../user/user-avatar-link\";\nimport UserLink from \"../../user/user-link\";\nimport EventVerificationIcon from \"../../common-event/event-verification-icon\";\nimport { TrustProvider } from \"../../../providers/local/trust-provider\";\nimport Timestamp from \"../../timestamp\";\nimport { CompactNoteContent } from \"../../compact-note-content\";\nimport HoverLinkOverlay from \"../../hover-link-overlay\";\nimport { getThreadReferences } from \"../../../helpers/nostr/event\";\nimport useSingleEvent from \"../../../hooks/use-single-event\";\nimport { getTorrentTitle } from \"../../../helpers/nostr/torrents\";\nimport { useNavigateInDrawer } from \"../../../providers/drawer-sub-view-provider\";\nimport { MouseEventHandler, useCallback } from \"react\";\nimport { nip19 } from \"nostr-tools\";\nimport useAppSettings from \"../../../hooks/use-app-settings\";\n\nexport default function EmbeddedTorrentComment({\n  comment,\n  ...props\n}: Omit<CardProps, \"children\"> & { comment: NostrEvent }) {\n  const navigate = useNavigateInDrawer();\n  const { showSignatureVerification } = useAppSettings();\n  const refs = getThreadReferences(comment);\n  const torrent = useSingleEvent(refs.root?.e?.id, refs.root?.e?.relays);\n  const linkToTorrent = refs.root?.e && `/torrents/${nip19.neventEncode(refs.root.e)}`;\n\n  const handleClick = useCallback<MouseEventHandler>(\n    (e) => {\n      e.preventDefault();\n      if (linkToTorrent) navigate(linkToTorrent);\n    },\n    [navigate, linkToTorrent],\n  );\n\n  return (\n    <TrustProvider event={comment}>\n      <Card as={LinkBox} {...props}>\n        <Flex p=\"2\" gap=\"2\" alignItems=\"center\">\n          <UserAvatarLink pubkey={comment.pubkey} size=\"xs\" />\n          <UserLink pubkey={comment.pubkey} fontWeight=\"bold\" isTruncated fontSize=\"lg\" />\n          <Text>Commented on</Text>\n          <HoverLinkOverlay as={RouterLink} to={linkToTorrent} fontWeight=\"bold\" onClick={handleClick}>\n            {torrent ? getTorrentTitle(torrent) : \"torrent\"}\n          </HoverLinkOverlay>\n          <Spacer />\n          {showSignatureVerification && <EventVerificationIcon event={comment} />}\n          <Timestamp timestamp={comment.created_at} />\n        </Flex>\n        <CompactNoteContent px=\"2\" event={comment} maxLength={96} />\n      </Card>\n    </TrustProvider>\n  );\n}\n"],"names":["EmbeddedTorrentComment","comment","props","navigate","useNavigateInDrawer","showSignatureVerification","useAppSettings","refs","getThreadReferences","torrent","useSingleEvent","_b","_a","_d","_c","linkToTorrent","_e","nip19","handleClick","useCallback","e","jsx","TrustProvider","Card","LinkBox","jsxs","Flex","UserAvatarLink","UserLink","Text","HoverLinkOverlay","RouterLink","getTorrentTitle","Spacer","EventVerificationIcon","Timestamp","CompactNoteContent"],"mappings":"2LAmBA,SAAwBA,EAAuB,CAC7C,QAAAC,EACA,GAAGC,CACL,EAA0D,eACxD,MAAMC,EAAWC,IACX,CAAE,0BAAAC,GAA8BC,IAChCC,EAAOC,EAAoBP,CAAO,EAClCQ,EAAUC,GAAeC,GAAAC,EAAAL,EAAK,OAAL,YAAAK,EAAW,IAAX,YAAAD,EAAc,IAAIE,GAAAC,EAAAP,EAAK,OAAL,YAAAO,EAAW,IAAX,YAAAD,EAAc,MAAM,EAC/DE,IAAgBC,EAAAT,EAAK,OAAL,YAAAS,EAAW,IAAK,aAAaC,EAAM,aAAaV,EAAK,KAAK,CAAC,CAAC,GAE5EW,EAAcC,EAAA,YACjBC,GAAM,CACLA,EAAE,eAAe,EACbL,KAAwBA,CAAa,CAC3C,EACA,CAACZ,EAAUY,CAAa,CAAA,EAIxB,OAAAM,EAAA,IAACC,GAAc,MAAOrB,EACpB,gBAACsB,EAAK,CAAA,GAAIC,EAAU,GAAGtB,EACrB,SAAA,CAAAuB,OAACC,GAAK,EAAE,IAAI,IAAI,IAAI,WAAW,SAC7B,SAAA,CAAAL,EAAA,IAACM,EAAe,CAAA,OAAQ1B,EAAQ,OAAQ,KAAK,KAAK,EAClDoB,EAAAA,IAACO,EAAS,CAAA,OAAQ3B,EAAQ,OAAQ,WAAW,OAAO,YAAW,GAAC,SAAS,IAAK,CAAA,EAC9EoB,EAAAA,IAACQ,GAAK,SAAY,cAAA,CAAA,EACjBR,EAAA,IAAAS,EAAA,CAAiB,GAAIC,EAAY,GAAIhB,EAAe,WAAW,OAAO,QAASG,EAC7E,SAAAT,EAAUuB,EAAgBvB,CAAO,EAAI,UACxC,QACCwB,EAAO,EAAA,EACP5B,GAA6BgB,EAAAA,IAACa,EAAsB,CAAA,MAAOjC,CAAS,CAAA,EACpEoB,EAAAA,IAAAc,EAAA,CAAU,UAAWlC,EAAQ,UAAY,CAAA,CAAA,EAC5C,QACCmC,EAAmB,CAAA,GAAG,IAAI,MAAOnC,EAAS,UAAW,GAAI,CAAA,CAC5D,CAAA,CACF,CAAA,CAEJ"}