import{ad as w,at as z,j as e,Z as S,ae as D,af as M,a6 as N,ca as R,r as f,c6 as U,V,F as d,E as n,cb as _,aP as G,y as b,H as v,cc as Z,T as k,aN as $,aX as q,cd as H,ce as K,S as J,bI as O,a$ as Q,v as y,cf as P,cg as W,ch as X,ci as Y,c7 as ee,t as se}from"./index-C6wlVu-O.js";import{E as te,a as C}from"./emoji-pack-menu-DlitT7Eb.js";function ae({onAdd:s}){const{register:t,handleSubmit:i,watch:r,getValues:g,reset:c}=O({defaultValues:{name:"",url:""}}),u=i(l=>{s(l),c()});r("url");const x=Q(g().url);return e.jsxs(d,{as:"form",gap:"2",onSubmit:u,children:[e.jsx(y,{placeholder:"name",...t("name",{required:!0}),pattern:"^[a-zA-Z0-9_-]+$",autoComplete:"off",title:"emoji name, can not contain spaces"}),e.jsx(y,{placeholder:"https://example.com/emoji.png",...t("url",{required:!0}),autoComplete:"off"}),x&&e.jsx(P,{aspectRatio:1,h:"10",src:x}),e.jsx(n,{flexShrink:0,type:"submit",children:"Add"})]})}function ne({name:s,url:t,onRemove:i,scale:r}){return e.jsxs(W,{children:[e.jsx(P,{src:t,title:s,alt:`:${s}:`,w:r,h:r,ml:"-1",mr:"2",my:"1",borderRadius:"md",overflow:"hidden"},s+t),e.jsx(X,{flex:1,children:s}),i&&e.jsx(Y,{onClick:i})]})}function ie({pack:s}){const t=D(),i=M(),r=N(),{deleteEvent:g}=R(),[c,u]=f.useState(10),x=(i==null?void 0:i.pubkey)===s.pubkey,l=U(s),[m,p]=f.useState(!1),[E,h]=f.useState(l),I=()=>{h(l),p(!0)},A=a=>{h(o=>o.concat(a))},F=a=>{h(o=>o.filter(j=>j.name!==a))},T=()=>{h([]),p(!1)},L=async()=>{const a={kind:ee,content:s.content||"",created_at:se().unix(),tags:[...s.tags.filter(j=>j[0]!=="emoji"),...E.map(({name:j,url:B})=>["emoji",j,B])]};await r("Update emoji pack",a)&&p(!1)};return e.jsxs(V,{children:[e.jsxs(d,{gap:"2",alignItems:"center",children:[e.jsx(n,{onClick:()=>t(-1),leftIcon:e.jsx(_,{}),children:"Back"}),e.jsx(G,{}),e.jsxs(b,{children:[x&&e.jsxs(e.Fragment,{children:[!m&&e.jsx(n,{colorScheme:"primary",onClick:I,children:"Edit"}),e.jsx(n,{colorScheme:"red",onClick:()=>g(s).then(()=>t("/lists")),children:"Delete"})]}),e.jsx(te,{"aria-label":"More options",pack:s})]})]}),e.jsxs(d,{gap:"2",alignItems:"center",children:[e.jsx(v,{size:"lg",isTruncated:!0,children:Z(s)}),e.jsx(C,{pack:s,size:"sm"})]}),e.jsxs(d,{gap:"2",alignItems:"center",children:[e.jsx(k,{children:"Created by:"}),e.jsx($,{pubkey:s.pubkey,size:"sm"}),e.jsx(S,{pubkey:s.pubkey,fontWeight:"bold"})]}),e.jsxs(k,{children:["Updated: ",e.jsx(q,{timestamp:s.created_at})]}),e.jsxs(b,{variant:"ghost",children:[e.jsx(H,{event:s}),e.jsx(K,{event:s}),e.jsx(C,{pack:s})]}),l.length>0&&e.jsxs(e.Fragment,{children:[!m&&e.jsxs(d,{alignItems:"flex-end",children:[e.jsx(v,{size:"md",children:"Emojis"}),e.jsxs(b,{size:"sm",isAttached:!0,ml:"auto",children:[e.jsx(n,{variant:c===10?"solid":"outline",onClick:()=>u(10),children:"SM"}),e.jsx(n,{variant:c===16?"solid":"outline",onClick:()=>u(16),children:"MD"}),e.jsx(n,{variant:c===24?"solid":"outline",onClick:()=>u(24),children:"LG"})]})]}),e.jsx(J,{columns:{base:2,sm:3,md:2,lg:4,xl:6},gap:"2",children:(m?E:l).map(({name:a,url:o})=>e.jsx(ne,{scale:c,name:a,url:o,onRemove:m?()=>F(a):void 0},a+o))})]}),m&&e.jsxs(d,{gap:"2",children:[e.jsx(ae,{onAdd:A}),e.jsx(n,{ml:"auto",onClick:T,children:"Cancel"}),e.jsx(n,{colorScheme:"primary",onClick:L,children:"Save"})]})]})}function ce(){const s=w("addr"),t=z(s);return t?e.jsx(ie,{pack:t}):e.jsxs(e.Fragment,{children:['Looking for pack "',s.identifier,'" created by ',e.jsx(S,{pubkey:s.pubkey})]})}export{ce as default};
//# sourceMappingURL=emoji-pack-Czybvn80.js.map
