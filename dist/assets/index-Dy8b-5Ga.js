import{af as h,r as i,ay as g,az as v,aA as w,j as e,V as A,B as k,H as p,T as f,ac as C,S,a2 as U,a3 as B,a4 as T,a5 as z,C as E,aB as H,a as L,b as q,aw as F,aC as M}from"./index-C6wlVu-O.js";const V=i.memo(({pubkey:o,blindspot:r})=>e.jsxs(E,{display:"block",p:"4",children:[e.jsx(H,{pubkey:o,mr:"4",float:"left"}),e.jsx(p,{size:"md",isTruncated:!0,children:e.jsx(L,{as:q,to:`/discovery/blindspot/${F.npubEncode(o)}`,children:e.jsx(M,{pubkey:o})})}),e.jsxs(f,{children:["Following ",r.length," users you don't follow"]})]}));function D(){const o=h(),[r,b]=i.useState("quality"),d=g(o.pubkey),t=v(),x=w();i.useEffect(()=>(t==null||t.on("computed",x),()=>{t==null||t.off("computed",x)}),[t]);const c=i.useMemo(()=>t==null?void 0:t.connections.get(o.pubkey),[d]),m=i.useMemo(()=>{if(!d||!c)return[];const a=Array.from(c).map(s=>{const n=t==null?void 0:t.connections.get(s),l=(n==null?void 0:n.filter(u=>!c.includes(u)&&u!==o.pubkey))??[];return{pubkey:s,blindspot:l}}).filter(s=>s.blindspot.length>2);if(r==="follows")return a.sort((s,n)=>n.blindspot.length-s.blindspot.length);{const s=new Map;for(const{pubkey:n,blindspot:l}of a){const u=l.reduce((j,y)=>j+((t==null?void 0:t.distance.get(y))??0),0);s.set(n,u/l.length)}return a.sort((n,l)=>s.get(n.pubkey)-s.get(l.pubkey))}},[o.pubkey,c,t,r]);return e.jsxs(A,{children:[e.jsxs(k,{children:[e.jsx(p,{children:"Blind spots"}),e.jsx(f,{fontStyle:"italic",children:"Pick another user and see what they are seeing that your not."})]}),e.jsxs(C,{ml:"auto",maxW:"48",value:r,onChange:a=>b(a.target.value),children:[e.jsx("option",{value:"quality",children:"Quality"}),e.jsx("option",{value:"follows",children:"Follows"})]}),m.length>0?e.jsx(S,{columns:{base:1,md:2,xl:3},spacing:"4",children:m.map(({pubkey:a,blindspot:s})=>e.jsx(V,{blindspot:s,pubkey:a},a))}):e.jsxs(U,{status:"info",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",children:[e.jsx(B,{boxSize:"40px",mr:0}),e.jsx(T,{mt:4,mb:1,fontSize:"lg",children:"No blind spots!"}),e.jsx(z,{maxWidth:"sm",children:"Unable to find any blind spots. maybe try following some people?"})]})]})}export{D as default};
//# sourceMappingURL=index-Dy8b-5Ga.js.map
