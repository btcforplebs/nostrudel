import{e as R,r as l,dH as x,d7 as g,bY as M,c_ as O,c$ as y,by as A,d0 as C,cY as I,dm as E,dI as S,dJ as T,i as h,j as c,I as k,bB as F}from"./index-C6wlVu-O.js";import{A as P}from"./community-approved-post-CnQFPEOV.js";import"./event-vote-buttions-RbXWv7yI.js";import"./community-post-BPGddPsB.js";function V(o,n,u=!0){const d=R(n),r=l.useMemo(()=>{const s={};for(const t of o)s[t]=x.requestReactions(t,d,u);return s},[o,d.urls.join("|"),u]),a={};for(const[s,t]of Object.entries(r))t.value&&(a[s]=t.value);return l.useState(0),g(Object.values(r)),a}function B(){const{community:o,timeline:n}=M(),u=O(),d=y(o),r=A(n.timeline)??[],a=C(r,d),s=r.filter(e=>e.kind!==I&&a.has(e.id)).map(e=>({event:e,approvals:a.get(e.id)})).filter(e=>!u(e.event)),t=V(s.map(e=>e.event.id),E(o)),m=l.useMemo(()=>{const e={};for(const[i,b]of Object.entries(t)){const f=S(b),{vote:j}=T(f);e[i]=j}return e},[t]),p=s.sort((e,i)=>(m[i.event.id]??0)-(m[e.event.id]??0)),v=h(n);return c.jsxs(c.Fragment,{children:[c.jsx(k,{callback:v,children:p.map(({event:e,approvals:i})=>c.jsx(P,{event:e,approvals:i??[]},e.id))}),c.jsx(F,{timeline:n})]})}export{B as default};
//# sourceMappingURL=trending-neDTLMuh.js.map
