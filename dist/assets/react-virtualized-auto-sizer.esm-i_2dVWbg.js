import{r as F}from"./index-C6wlVu-O.js";function W(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}let d;typeof window<"u"?d=window:typeof self<"u"?d=self:d=global;let L=null,b=null;const N=20,y=d.clearTimeout,C=d.setTimeout,R=d.cancelAnimationFrame||d.mozCancelAnimationFrame||d.webkitCancelAnimationFrame,x=d.requestAnimationFrame||d.mozRequestAnimationFrame||d.webkitRequestAnimationFrame;R==null||x==null?(L=y,b=function(a){return C(a,N)}):(L=function([a,t]){R(a),y(t)},b=function(a){const t=x(function(){y(l),a()}),l=C(function(){R(t),a()},N);return[t,l]});function A(f){let a,t,l,c,g,u,m;const p=typeof document<"u"&&document.attachEvent;if(!p){u=function(i){const s=i.__resizeTriggers__,h=s.firstElementChild,w=s.lastElementChild,E=h.firstElementChild;w.scrollLeft=w.scrollWidth,w.scrollTop=w.scrollHeight,E.style.width=h.offsetWidth+1+"px",E.style.height=h.offsetHeight+1+"px",h.scrollLeft=h.scrollWidth,h.scrollTop=h.scrollHeight},g=function(i){return i.offsetWidth!==i.__resizeLast__.width||i.offsetHeight!==i.__resizeLast__.height},m=function(i){if(i.target.className&&typeof i.target.className.indexOf=="function"&&i.target.className.indexOf("contract-trigger")<0&&i.target.className.indexOf("expand-trigger")<0)return;const s=this;u(this),this.__resizeRAF__&&L(this.__resizeRAF__),this.__resizeRAF__=b(function(){g(s)&&(s.__resizeLast__.width=s.offsetWidth,s.__resizeLast__.height=s.offsetHeight,s.__resizeListeners__.forEach(function(E){E.call(s,i)}))})};let e=!1,n="";l="animationstart";const r="Webkit Moz O ms".split(" ");let o="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),_="";{const i=document.createElement("fakeelement");if(i.style.animationName!==void 0&&(e=!0),e===!1){for(let s=0;s<r.length;s++)if(i.style[r[s]+"AnimationName"]!==void 0){_=r[s],n="-"+_.toLowerCase()+"-",l=o[s],e=!0;break}}}t="resizeanim",a="@"+n+"keyframes "+t+" { from { opacity: 0; } to { opacity: 0; } } ",c=n+"animation: 1ms "+t+"; "}const z=function(e){if(!e.getElementById("detectElementResize")){const n=(a||"")+".resize-triggers { "+(c||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=e.head||e.getElementsByTagName("head")[0],o=e.createElement("style");o.id="detectElementResize",o.type="text/css",f!=null&&o.setAttribute("nonce",f),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(e.createTextNode(n)),r.appendChild(o)}};return{addResizeListener:function(e,n){if(p)e.attachEvent("onresize",n);else{if(!e.__resizeTriggers__){const r=e.ownerDocument,o=d.getComputedStyle(e);o&&o.position==="static"&&(e.style.position="relative"),z(r),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=r.createElement("div")).className="resize-triggers";const _=r.createElement("div");_.className="expand-trigger",_.appendChild(r.createElement("div"));const i=r.createElement("div");i.className="contract-trigger",e.__resizeTriggers__.appendChild(_),e.__resizeTriggers__.appendChild(i),e.appendChild(e.__resizeTriggers__),u(e),e.addEventListener("scroll",m,!0),l&&(e.__resizeTriggers__.__animationListener__=function(h){h.animationName===t&&u(e)},e.__resizeTriggers__.addEventListener(l,e.__resizeTriggers__.__animationListener__))}e.__resizeListeners__.push(n)}},removeResizeListener:function(e,n){if(p)e.detachEvent("onresize",n);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(n),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",m,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(l,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch{}}}}}class O extends F.Component{constructor(...a){super(...a),this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:t,disableWidth:l,onResize:c}=this.props;if(this._parentNode){const g=window.getComputedStyle(this._parentNode)||{},u=parseFloat(g.paddingLeft||"0"),m=parseFloat(g.paddingRight||"0"),p=parseFloat(g.paddingTop||"0"),z=parseFloat(g.paddingBottom||"0"),v=this._parentNode.getBoundingClientRect(),T=v.height-p-z,e=v.width-u-m,n=this._parentNode.offsetHeight-p-z,r=this._parentNode.offsetWidth-u-m;(!t&&(this.state.height!==n||this.state.scaledHeight!==T)||!l&&(this.state.width!==r||this.state.scaledWidth!==e))&&(this.setState({height:n,width:r,scaledHeight:T,scaledWidth:e}),typeof c=="function"&&c({height:n,scaledHeight:T,scaledWidth:e,width:r}))}},this._setRef=t=>{this._autoSizer=t}}componentDidMount(){const{nonce:a}=this.props,t=this._autoSizer?this._autoSizer.parentNode:null;if(t!=null&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){this._parentNode=t;const l=t.ownerDocument.defaultView.ResizeObserver;l!=null?(this._resizeObserver=new l(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(t)):(this._detectElementResize=A(a),this._detectElementResize.addResizeListener(t,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:a,defaultHeight:t,defaultWidth:l,disableHeight:c=!1,disableWidth:g=!1,doNotBailOutOnEmptyChildren:u=!1,nonce:m,onResize:p,style:z={},tagName:v="div",...T}=this.props,{height:e,scaledHeight:n,scaledWidth:r,width:o}=this.state,_={overflow:"visible"},i={};let s=!1;return c||(e===0&&(s=!0),_.height=0,i.height=e,i.scaledHeight=n),g||(o===0&&(s=!0),_.width=0,i.width=o,i.scaledWidth=r),u&&(s=!1),F.createElement(v,{ref:this._setRef,style:{..._,...z},...T},!s&&a(i))}}export{O as A,W as _};
//# sourceMappingURL=react-virtualized-auto-sizer.esm-i_2dVWbg.js.map
