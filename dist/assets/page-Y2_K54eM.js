import{ad as F,at as S,j as e,_ as W,V as A,af as B,hA as g,hB as T,hC as I,F as h,B as z,H as j,hD as R,T as u,Z as p,aX as $,y as m,E as o,b as l,hE as f,cm as C,ce as D,cd as V,hF as H,Y as L,hG as O,az as G,e as _,r as M,hw as Z,dX as X,S as y,a2 as v,a3 as w,hH as Y,b1 as P,aw as E,hz as q}from"./index-C6wlVu-O.js";import{W as b,F as K}from"./wiki-page-result-Dc4rntwz.js";import{W as N,a as Q}from"./wiki-page-menu-N25ZOhSC.js";import{E as U}from"./event-vote-buttions-RbXWv7yI.js";import"./wiki-search-form-DoxHDalM.js";function J({page:s,address:r}){const a=f(s);return e.jsxs(v,{status:"info",display:"flex",flexWrap:"wrap",children:[e.jsx(w,{children:e.jsx(Y,{boxSize:5})}),e.jsxs(u,{children:["This page was forked from ",e.jsx(p,{pubkey:r.pubkey,fontWeight:"bold"})," version"]}),e.jsxs(m,{variant:"link",ml:"auto",children:[e.jsx(o,{leftIcon:e.jsx(P,{}),as:l,to:`/wiki/page/${E.naddrEncode(r)}`,children:"Original"}),e.jsx(o,{leftIcon:e.jsx(K,{}),as:l,to:`/wiki/compare/${a}/${r.pubkey}/${s.pubkey}`,children:"Compare"})]})]})}function ee({page:s,address:r}){return e.jsxs(v,{status:"warning",display:"flex",flexWrap:"wrap",children:[e.jsx(w,{}),e.jsxs(u,{children:["The author of this page has deferred to ",e.jsx(p,{pubkey:r.pubkey,fontWeight:"bold"})," version"]}),e.jsx(o,{leftIcon:e.jsx(P,{}),as:l,to:`/wiki/page/${E.naddrEncode(r)}`,variant:"link",ml:"4",children:"View"})]})}function se({page:s}){const r=B(),{address:a}=g(s),n=T(s),c=I(s,!1);return e.jsxs(e.Fragment,{children:[e.jsxs(h,{gap:"2",wrap:"wrap",children:[e.jsxs(z,{flex:1,children:[e.jsx(j,{children:R(s)}),e.jsxs(u,{children:["by ",e.jsx(p,{pubkey:s.pubkey})," - ",e.jsx($,{timestamp:s.created_at})]})]}),e.jsxs(h,{direction:"column",gap:"2",ml:"auto",children:[e.jsxs(m,{ml:"auto",size:"sm",children:[s.pubkey===(r==null?void 0:r.pubkey)&&e.jsx(o,{as:l,colorScheme:"primary",to:`/wiki/edit/${f(s)}`,children:"Edit"}),s.pubkey!==(r==null?void 0:r.pubkey)&&e.jsx(o,{as:l,colorScheme:"primary",to:`/wiki/create?fork=${C.getSharableEventAddress(s)}`,children:"Fork"})]}),e.jsxs(h,{alignItems:"flex-end",gap:"2",ml:"auto",children:[e.jsx(U,{event:s,inline:!0,chevrons:!1}),e.jsxs(m,{size:"sm",children:[e.jsx(D,{event:s}),e.jsx(V,{event:s,showEventPreview:!1}),e.jsx(Q,{page:s,"aria-label":"Page Options"})]})]})]})]}),a&&e.jsx(J,{page:s,address:a}),(n==null?void 0:n.address)&&e.jsx(ee,{page:s,address:n.address}),e.jsx(H,{event:s}),e.jsx(L,{}),c&&e.jsx(u,{fontStyle:"italic",children:c}),e.jsx(O,{event:s})]})}function re({page:s}){const r=G(),a=f(s),n=_(),c=M.useMemo(()=>Z.requestTopic(a,n),[a,n]),d=X(c);let i=d?Array.from(d.values()).filter(t=>{var k;return((k=g(t).address)==null?void 0:k.pubkey)===s.pubkey}):[];r&&(i=r.sortByDistanceAndConnections(i,t=>t.pubkey));let x=d?Array.from(d.values()).filter(t=>!i.includes(t)&&t.pubkey!==s.pubkey):[];return r&&(x=r.sortByDistanceAndConnections(x,t=>t.pubkey)),e.jsxs(e.Fragment,{children:[i.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(j,{size:"lg",mt:"4",children:"Forks:"}),e.jsx(y,{spacing:"2",columns:{base:1,lg:2,xl:3},children:i.map(t=>e.jsx(b,{page:t,compare:s},t.id))})]}),x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(j,{size:"lg",mt:"4",children:"Other Versions:"}),e.jsx(y,{spacing:"2",columns:{base:1,lg:2,xl:3},children:x.map(t=>e.jsx(b,{page:t,compare:s},t.id))})]})]})}function le(){const s=F("naddr"),r=S(s,q);return r?e.jsxs(A,{children:[e.jsx(N,{}),e.jsx(se,{page:r}),e.jsx(re,{page:r})]}):e.jsx(W,{})}export{se as WikiPagePage,le as default};
//# sourceMappingURL=page-Y2_K54eM.js.map
