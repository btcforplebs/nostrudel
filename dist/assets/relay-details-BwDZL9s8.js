import{bq as j,dx as v,hS as _,hT as C,r as s,e_ as T,fg as k,b6 as y,cX as L,hU as S,j as e,V as P,F as g,T as w,E as A,C as h,H as q}from"./index-C6wlVu-O.js";import{E as D,a as K,C as M,A as R,p as m,b as V,c as z,d as B,L as F,P as H,e as I,f as U}from"./event-kinds-table-ZNhBMzdA.js";M.register(R,m,V,z,B,F,H,I,U,m);function J({relay:t}){j(`${t} - Details`);const x=v(),r=_().semanticTokens.colors["chakra-body-text"];C(r._light,r._dark);const[X,l]=s.useState(),a=s.useMemo(()=>new T,[]),[E,i]=s.useState(!1),o=s.useCallback(()=>{i(!0);const u={limit:500},p=a.getLastEvent();p&&(u.until=p.created_at);const f=k(()=>l({}),100),b=y.requestRelay(t).subscribe([u],{onevent:n=>{a.addEvent(n),f()},oneose:()=>b.close(),onclose:n=>{n!=="closed by caller"&&x({status:"error",description:n}),i(!1)}})},[t,l,a]);s.useEffect(()=>o(),[t,o]);const c=Array.from(a.events.values()).sort(L),d=S(c);return e.jsxs(P,{children:[e.jsxs(g,{gap:"2",alignItems:"center",children:[e.jsxs(w,{children:["Events loaded: ",c.length]}),e.jsx(A,{size:"sm",onClick:o,isLoading:E,children:"Load more"})]}),e.jsxs(g,{wrap:"wrap",gap:"4",alignItems:"flex-start",children:[e.jsxs(h,{p:"2",w:"50%",children:[e.jsx(q,{size:"sm",children:"Events by kind"}),e.jsx(D,{kinds:d})]}),e.jsx(h,{p:"2",minW:"xs",children:e.jsx(K,{kinds:d})})]})]})}export{J as default};
//# sourceMappingURL=relay-details-BwDZL9s8.js.map
