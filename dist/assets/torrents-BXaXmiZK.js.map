{"version":3,"file":"torrents-BXaXmiZK.js","sources":["../../src/views/user/torrents.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport { Table, TableContainer, Tbody, Th, Thead, Tr } from \"@chakra-ui/react\";\nimport { useOutletContext } from \"react-router-dom\";\n\nimport useTimelineLoader from \"../../hooks/use-timeline-loader\";\nimport { useAdditionalRelayContext } from \"../../providers/local/additional-relay-context\";\nimport TimelineActionAndStatus from \"../../components/timeline/timeline-action-and-status\";\nimport IntersectionObserverProvider from \"../../providers/local/intersection-observer\";\nimport { useTimelineCurserIntersectionCallback } from \"../../hooks/use-timeline-cursor-intersection-callback\";\nimport VerticalPageLayout from \"../../components/vertical-page-layout\";\nimport { TORRENT_KIND, validateTorrent } from \"../../helpers/nostr/torrents\";\nimport TorrentTableRow from \"../torrents/components/torrent-table-row\";\nimport { NostrEvent } from \"../../types/nostr-event\";\n\nexport default function UserTorrentsTab() {\n  const { pubkey } = useOutletContext() as { pubkey: string };\n  const contextRelays = useAdditionalRelayContext();\n\n  const eventFilter = useCallback((t: NostrEvent) => validateTorrent(t), []);\n  const { loader, timeline: torrents } = useTimelineLoader(\n    `${pubkey}-torrents`,\n    contextRelays,\n    {\n      authors: [pubkey],\n      kinds: [TORRENT_KIND],\n    },\n    { eventFilter },\n  );\n  const callback = useTimelineCurserIntersectionCallback(loader);\n\n  return (\n    <IntersectionObserverProvider callback={callback}>\n      <VerticalPageLayout>\n        <TableContainer>\n          <Table size=\"sm\">\n            <Thead>\n              <Tr>\n                <Th>Tags</Th>\n                <Th>Name</Th>\n                <Th>Uploaded</Th>\n                <Th>Size</Th>\n                <Th>From</Th>\n                <Th />\n              </Tr>\n            </Thead>\n            <Tbody>{torrents?.map((torrent) => <TorrentTableRow key={torrent.id} torrent={torrent} />)}</Tbody>\n          </Table>\n        </TableContainer>\n\n        <TimelineActionAndStatus timeline={loader} />\n      </VerticalPageLayout>\n    </IntersectionObserverProvider>\n  );\n}\n"],"names":["UserTorrentsTab","pubkey","useOutletContext","contextRelays","useAdditionalRelayContext","eventFilter","useCallback","t","validateTorrent","loader","torrents","useTimelineLoader","TORRENT_KIND","callback","useTimelineCurserIntersectionCallback","jsx","IntersectionObserverProvider","jsxs","VerticalPageLayout","TableContainer","Table","Thead","Tr","Th","Tbody","torrent","TorrentTableRow","TimelineActionAndStatus"],"mappings":"uRAcA,SAAwBA,GAAkB,CAClC,KAAA,CAAE,OAAAC,GAAWC,IACbC,EAAgBC,IAEhBC,EAAcC,EAAAA,YAAaC,GAAkBC,EAAgBD,CAAC,EAAG,CAAA,CAAE,EACnE,CAAE,OAAAE,EAAQ,SAAUC,CAAa,EAAAC,EACrC,GAAGV,CAAM,YACTE,EACA,CACE,QAAS,CAACF,CAAM,EAChB,MAAO,CAACW,CAAY,CACtB,EACA,CAAE,YAAAP,CAAY,CAAA,EAEVQ,EAAWC,EAAsCL,CAAM,EAE7D,OACGM,EAAA,IAAAC,EAAA,CAA6B,SAAAH,EAC5B,SAAAI,OAACC,EACC,CAAA,SAAA,CAAAH,MAACI,EACC,CAAA,SAAAF,EAAAA,KAACG,EAAM,CAAA,KAAK,KACV,SAAA,CAACL,EAAA,IAAAM,EAAA,CACC,gBAACC,EACC,CAAA,SAAA,CAAAP,EAAAA,IAACQ,GAAG,SAAI,MAAA,CAAA,EACRR,EAAAA,IAACQ,GAAG,SAAI,MAAA,CAAA,EACRR,EAAAA,IAACQ,GAAG,SAAQ,UAAA,CAAA,EACZR,EAAAA,IAACQ,GAAG,SAAI,MAAA,CAAA,EACRR,EAAAA,IAACQ,GAAG,SAAI,MAAA,CAAA,QACPA,EAAG,EAAA,CAAA,CAAA,CACN,CACF,CAAA,EACCR,EAAA,IAAAS,EAAA,CAAO,SAAUd,GAAA,YAAAA,EAAA,IAAKe,GAAaV,EAAA,IAAAW,EAAA,CAAiC,QAAAD,CAAZ,EAAAA,EAAQ,EAAsB,EAAI,CAAA,CAAA,CAAA,CAC7F,CACF,CAAA,EAEAV,EAAAA,IAACY,EAAwB,CAAA,SAAUlB,CAAQ,CAAA,CAAA,CAC7C,CAAA,CACF,CAAA,CAEJ"}