{"version":3,"file":"index-CYE1Kylu.js","sources":["../../src/views/goals/index.tsx"],"sourcesContent":["import { Button, Center, Divider, Flex, Heading, Link, SimpleGrid, Spacer } from \"@chakra-ui/react\";\nimport { Navigate, Link as RouterLink } from \"react-router-dom\";\nimport { getEventUID } from \"applesauce-core/helpers\";\nimport { kinds } from \"nostr-tools\";\n\nimport useCurrentAccount from \"../../hooks/use-current-account\";\nimport { ExternalLinkIcon } from \"../../components/icons\";\nimport { useReadRelays } from \"../../hooks/use-client-relays\";\nimport useTimelineLoader from \"../../hooks/use-timeline-loader\";\nimport GoalCard from \"./components/goal-card\";\nimport VerticalPageLayout from \"../../components/vertical-page-layout\";\n\nfunction UserGoalsManagerPage() {\n  const account = useCurrentAccount()!;\n\n  const readRelays = useReadRelays();\n  const { loader, timeline: goals } = useTimelineLoader(\n    `${account.pubkey}-goals`,\n    readRelays,\n    account.pubkey\n      ? {\n          authors: [account.pubkey],\n          kinds: [kinds.ZapGoal],\n        }\n      : undefined,\n  );\n\n  if (goals.length === 0) {\n    return (\n      <Center p=\"10\" fontSize=\"lg\" whiteSpace=\"pre\">\n        You don't have any goals,{\" \"}\n        <Link as={RouterLink} to=\"/goals/browse\" color=\"blue.500\">\n          Find a goal\n        </Link>\n        &nbsp;to support or{\" \"}\n        <Link href=\"https://goals-silk.vercel.app/new\" isExternal color=\"blue.500\">\n          Create one\n        </Link>\n      </Center>\n    );\n  }\n\n  return (\n    <>\n      {goals && goals.length > 0 && (\n        <>\n          <Heading size=\"md\" mt=\"2\">\n            Created goals\n          </Heading>\n          <Divider />\n          <SimpleGrid columns={{ base: 1, lg: 2 }} spacing=\"2\">\n            {goals.map((event) => (\n              <GoalCard key={getEventUID(event)} goal={event} />\n            ))}\n          </SimpleGrid>\n        </>\n      )}\n    </>\n  );\n}\n\nexport default function GoalsView() {\n  const account = useCurrentAccount();\n\n  return (\n    <VerticalPageLayout>\n      <Flex gap=\"2\">\n        <Button as={RouterLink} to=\"/goals/browse\">\n          Explore goals\n        </Button>\n        <Spacer />\n        <Button as={Link} href=\"https://goals-silk.vercel.app/\" isExternal rightIcon={<ExternalLinkIcon />}>\n          Goal manager\n        </Button>\n      </Flex>\n\n      {account ? <UserGoalsManagerPage /> : <Navigate to=\"/goals/browse\" />}\n    </VerticalPageLayout>\n  );\n}\n"],"names":["UserGoalsManagerPage","account","useCurrentAccount","readRelays","useReadRelays","loader","goals","useTimelineLoader","kinds","Center","jsx","Link","RouterLink","Fragment","jsxs","Heading","Divider","SimpleGrid","event","GoalCard","getEventUID","GoalsView","VerticalPageLayout","Flex","Button","Spacer","ExternalLinkIcon","Navigate"],"mappings":"sNAYA,SAASA,GAAuB,CAC9B,MAAMC,EAAUC,IAEVC,EAAaC,IACb,CAAE,OAAAC,EAAQ,SAAUC,CAAU,EAAAC,EAClC,GAAGN,EAAQ,MAAM,SACjBE,EACAF,EAAQ,OACJ,CACE,QAAS,CAACA,EAAQ,MAAM,EACxB,MAAO,CAACO,EAAM,OAAO,CAEvB,EAAA,MAAA,EAGF,OAAAF,EAAM,SAAW,SAEhBG,EAAO,CAAA,EAAE,KAAK,SAAS,KAAK,WAAW,MAAM,SAAA,CAAA,4BAClB,IAC1BC,EAAAA,IAACC,GAAK,GAAIC,EAAY,GAAG,gBAAgB,MAAM,WAAW,SAE1D,aAAA,CAAA,EAAO,iBACa,IACpBF,EAAAA,IAACC,GAAK,KAAK,oCAAoC,WAAU,GAAC,MAAM,WAAW,SAE3E,YAAA,CAAA,CACF,CAAA,CAAA,EAMCD,MAAAG,EAAAA,SAAA,CAAA,SAAAP,GAASA,EAAM,OAAS,GAErBQ,EAAAA,KAAAD,EAAA,SAAA,CAAA,SAAA,CAAAH,MAACK,EAAQ,CAAA,KAAK,KAAK,GAAG,IAAI,SAE1B,gBAAA,QACCC,EAAQ,EAAA,EACTN,EAAAA,IAACO,GAAW,QAAS,CAAE,KAAM,EAAG,GAAI,CAAE,EAAG,QAAQ,IAC9C,WAAM,IAAKC,GACVR,EAAA,IAACS,EAAkC,CAAA,KAAMD,GAA1BE,EAAYF,CAAK,CAAgB,CACjD,CACH,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAEJ,CAEA,SAAwBG,GAAY,CAClC,MAAMpB,EAAUC,IAEhB,cACGoB,EACC,CAAA,SAAA,CAACR,EAAAA,KAAAS,EAAA,CAAK,IAAI,IACR,SAAA,CAAAb,MAACc,EAAO,CAAA,GAAIZ,EAAY,GAAG,gBAAgB,SAE3C,gBAAA,QACCa,EAAO,EAAA,EACPf,EAAA,IAAAc,EAAA,CAAO,GAAIb,EAAM,KAAK,iCAAiC,WAAU,GAAC,UAAWD,EAAA,IAACgB,EAAiB,CAAA,CAAA,EAAI,SAEpG,eAAA,CAAA,EACF,EAECzB,EAAWS,EAAAA,IAAAV,EAAA,EAAqB,EAAMU,EAAA,IAAAiB,EAAA,CAAS,GAAG,gBAAgB,CACrE,CAAA,CAAA,CAEJ"}