{"version":3,"file":"index-z_XX-eEg.js","sources":["../../src/views/badges/index.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport { Button, Flex, Heading, Image, Link, Spacer } from \"@chakra-ui/react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { kinds } from \"nostr-tools\";\n\nimport { ExternalLinkIcon } from \"../../components/icons\";\nimport VerticalPageLayout from \"../../components/vertical-page-layout\";\nimport useTimelineLoader from \"../../hooks/use-timeline-loader\";\nimport PeopleListProvider, { usePeopleListContext } from \"../../providers/local/people-list-provider\";\nimport PeopleListSelection from \"../../components/people-list-selection/people-list-selection\";\nimport { useReadRelays } from \"../../hooks/use-client-relays\";\nimport IntersectionObserverProvider from \"../../providers/local/intersection-observer\";\nimport { useTimelineCurserIntersectionCallback } from \"../../hooks/use-timeline-cursor-intersection-callback\";\nimport BadgeAwardCard from \"./components/badge-award-card\";\nimport { ErrorBoundary } from \"../../components/error-boundary\";\nimport useClientSideMuteFilter from \"../../hooks/use-client-side-mute-filter\";\nimport { NostrEvent } from \"../../types/nostr-event\";\n\nfunction BadgesPage() {\n  const { filter, listId } = usePeopleListContext();\n  const muteFilter = useClientSideMuteFilter();\n  const eventFilter = useCallback(\n    (e: NostrEvent) => {\n      if (muteFilter(e)) return false;\n      return true;\n    },\n    [muteFilter],\n  );\n  const readRelays = useReadRelays();\n  const { loader, timeline: awards } = useTimelineLoader(\n    `${listId}-lists`,\n    readRelays,\n    {\n      \"#p\": filter?.authors,\n      kinds: [kinds.BadgeAward],\n    },\n    { eventFilter },\n  );\n  const callback = useTimelineCurserIntersectionCallback(loader);\n\n  return (\n    <VerticalPageLayout>\n      <Flex gap=\"2\" wrap=\"wrap\">\n        <Button as={RouterLink} to=\"/badges/browse\">\n          Browse Badges\n        </Button>\n        <Spacer />\n        <Button\n          as={Link}\n          href=\"https://badges.page/\"\n          isExternal\n          rightIcon={<ExternalLinkIcon />}\n          leftIcon={<Image src=\"https://badges.page/favicon.ico\" w=\"1.2em\" />}\n        >\n          Badges\n        </Button>\n      </Flex>\n      <Flex gap=\"2\" alignItems=\"center\">\n        <Heading size=\"lg\">Recent awards</Heading>\n        <PeopleListSelection />\n      </Flex>\n      <IntersectionObserverProvider callback={callback}>\n        {awards?.map((award) => (\n          <ErrorBoundary key={award.id}>\n            <BadgeAwardCard award={award} />\n          </ErrorBoundary>\n        ))}\n      </IntersectionObserverProvider>\n    </VerticalPageLayout>\n  );\n}\n\nexport default function BadgesView() {\n  // const account = useCurrentAccount();\n  // return account ? <BadgesPage /> : <Navigate to=\"/lists/browse\" />;\n  return (\n    <PeopleListProvider>\n      <BadgesPage />\n    </PeopleListProvider>\n  );\n}\n"],"names":["BadgesPage","filter","listId","usePeopleListContext","muteFilter","useClientSideMuteFilter","eventFilter","useCallback","e","readRelays","useReadRelays","loader","awards","useTimelineLoader","kinds","callback","useTimelineCurserIntersectionCallback","VerticalPageLayout","jsxs","Flex","jsx","Button","RouterLink","Spacer","Link","ExternalLinkIcon","Image","Heading","PeopleListSelection","IntersectionObserverProvider","award","ErrorBoundary","BadgeAwardCard","BadgesView","PeopleListProvider"],"mappings":"oMAkBA,SAASA,GAAa,CACpB,KAAM,CAAE,OAAAC,EAAQ,OAAAC,CAAO,EAAIC,EAAqB,EAC1CC,EAAaC,IACbC,EAAcC,EAAA,YACjBC,GACK,CAAAJ,EAAWI,CAAC,EAGlB,CAACJ,CAAU,CAAA,EAEPK,EAAaC,IACb,CAAE,OAAAC,EAAQ,SAAUC,CAAW,EAAAC,EACnC,GAAGX,CAAM,SACTO,EACA,CACE,KAAMR,GAAA,YAAAA,EAAQ,QACd,MAAO,CAACa,EAAM,UAAU,CAC1B,EACA,CAAE,YAAAR,CAAY,CAAA,EAEVS,EAAWC,EAAsCL,CAAM,EAE7D,cACGM,EACC,CAAA,SAAA,CAAAC,EAAA,KAACC,EAAK,CAAA,IAAI,IAAI,KAAK,OACjB,SAAA,CAAAC,MAACC,EAAO,CAAA,GAAIC,EAAY,GAAG,iBAAiB,SAE5C,gBAAA,QACCC,EAAO,EAAA,EACRH,EAAA,IAACC,EAAA,CACC,GAAIG,EACJ,KAAK,uBACL,WAAU,GACV,gBAAYC,EAAiB,EAAA,EAC7B,SAAWL,EAAA,IAAAM,EAAA,CAAM,IAAI,kCAAkC,EAAE,QAAQ,EAClE,SAAA,QAAA,CAED,CAAA,EACF,EACCR,EAAA,KAAAC,EAAA,CAAK,IAAI,IAAI,WAAW,SACvB,SAAA,CAACC,EAAA,IAAAO,EAAA,CAAQ,KAAK,KAAK,SAAa,gBAAA,QAC/BC,EAAoB,EAAA,CAAA,EACvB,QACCC,EAA6B,CAAA,SAAAd,EAC3B,SAAQH,GAAA,YAAAA,EAAA,IAAKkB,GACZV,MAACW,EACC,CAAA,SAAAX,EAAAA,IAACY,GAAe,MAAAF,CAAc,CAAA,CAAA,EADZA,EAAM,EAE1B,GAEJ,CACF,CAAA,CAAA,CAEJ,CAEA,SAAwBG,GAAa,CAGnC,OACGb,EAAA,IAAAc,EAAA,CACC,SAACd,EAAA,IAAApB,EAAA,CAAA,CAAW,CACd,CAAA,CAEJ"}