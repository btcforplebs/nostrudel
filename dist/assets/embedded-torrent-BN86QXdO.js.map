{"version":3,"file":"embedded-torrent-BN86QXdO.js","sources":["../../src/components/embed-event/event-types/embedded-torrent.tsx"],"sourcesContent":["import { MouseEventHandler, useCallback } from \"react\";\nimport {\n  Button,\n  Card,\n  CardBody,\n  CardFooter,\n  CardHeader,\n  CardProps,\n  Flex,\n  Heading,\n  Link,\n  LinkBox,\n  Spacer,\n  Tag,\n  Text,\n} from \"@chakra-ui/react\";\nimport { Link as RouterLink, useNavigate } from \"react-router-dom\";\n\nimport UserAvatarLink from \"../../user/user-avatar-link\";\nimport UserLink from \"../../user/user-link\";\nimport { NostrEvent } from \"../../../types/nostr-event\";\nimport Timestamp from \"../../timestamp\";\nimport Magnet from \"../../icons/magnet\";\nimport { getTorrentMagnetLink, getTorrentSize, getTorrentTitle } from \"../../../helpers/nostr/torrents\";\nimport { formatBytes } from \"../../../helpers/number\";\nimport { useNavigateInDrawer } from \"../../../providers/drawer-sub-view-provider\";\nimport HoverLinkOverlay from \"../../hover-link-overlay\";\nimport relayHintService from \"../../../services/event-relay-hint\";\nimport useSubject from \"../../../hooks/use-subject\";\nimport localSettings from \"../../../services/local-settings\";\n\nexport default function EmbeddedTorrent({ torrent, ...props }: Omit<CardProps, \"children\"> & { torrent: NostrEvent }) {\n  const enableDrawer = useSubject(localSettings.enableNoteThreadDrawer);\n  const navigate = enableDrawer ? useNavigateInDrawer() : useNavigate();\n  const link = `/torrents/${relayHintService.getSharableEventAddress(torrent)}`;\n\n  const handleClick = useCallback<MouseEventHandler>(\n    (e) => {\n      e.preventDefault();\n      navigate(link);\n    },\n    [navigate, link],\n  );\n\n  return (\n    <Card as={LinkBox} {...props}>\n      <CardHeader display=\"flex\" gap=\"2\" alignItems=\"center\" p=\"2\" pb=\"0\" flexWrap=\"wrap\">\n        <Heading size=\"md\">\n          <HoverLinkOverlay as={RouterLink} to={link} onClick={handleClick}>\n            {getTorrentTitle(torrent)}\n          </HoverLinkOverlay>\n        </Heading>\n        <UserAvatarLink pubkey={torrent.pubkey} size=\"xs\" />\n        <UserLink pubkey={torrent.pubkey} isTruncated fontWeight=\"bold\" fontSize=\"md\" />\n        <Spacer />\n        <Timestamp timestamp={torrent.created_at} />\n      </CardHeader>\n      <CardBody p=\"2\">\n        <Text>Size: {formatBytes(getTorrentSize(torrent))}</Text>\n        <Flex gap=\"2\">\n          <Text>Tags:</Text>\n          {torrent.tags\n            .filter((t) => t[0] === \"t\")\n            .map(([_, tag]) => (\n              <Tag key={tag}>{tag}</Tag>\n            ))}\n        </Flex>\n      </CardBody>\n      <CardFooter p=\"2\" display=\"flex\" pt=\"0\" gap=\"4\">\n        <Button\n          as={Link}\n          leftIcon={<Magnet boxSize={5} />}\n          href={getTorrentMagnetLink(torrent)}\n          isExternal\n          variant=\"link\"\n        >\n          Download torrent\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n}\n"],"names":["EmbeddedTorrent","torrent","props","navigate","useSubject","localSettings","useNavigateInDrawer","useNavigate","link","relayHintService","handleClick","useCallback","e","jsxs","Card","LinkBox","CardHeader","jsx","Heading","HoverLinkOverlay","RouterLink","getTorrentTitle","UserAvatarLink","UserLink","Spacer","Timestamp","CardBody","Text","formatBytes","getTorrentSize","Flex","t","_","tag","Tag","CardFooter","Button","Link","Magnet","getTorrentMagnetLink"],"mappings":"mRA+BA,SAAwBA,EAAgB,CAAE,QAAAC,EAAS,GAAGC,GAAgE,CAEpH,MAAMC,EADeC,EAAWC,EAAc,sBAAsB,EACpCC,EAAoB,EAAIC,EAAY,EAC9DC,EAAO,aAAaC,EAAiB,wBAAwBR,CAAO,CAAC,GAErES,EAAcC,EAAA,YACjBC,GAAM,CACLA,EAAE,eAAe,EACjBT,EAASK,CAAI,CACf,EACA,CAACL,EAAUK,CAAI,CAAA,EAGjB,OACGK,EAAAA,KAAAC,EAAA,CAAK,GAAIC,EAAU,GAAGb,EACrB,SAAA,CAAAW,EAAA,KAACG,EAAW,CAAA,QAAQ,OAAO,IAAI,IAAI,WAAW,SAAS,EAAE,IAAI,GAAG,IAAI,SAAS,OAC3E,SAAA,CAAAC,MAACC,EAAQ,CAAA,KAAK,KACZ,SAAAD,EAAA,IAACE,GAAiB,GAAIC,EAAY,GAAIZ,EAAM,QAASE,EAClD,SAAgBW,EAAApB,CAAO,CAC1B,CAAA,EACF,QACCqB,EAAe,CAAA,OAAQrB,EAAQ,OAAQ,KAAK,KAAK,EAClDgB,EAAAA,IAACM,EAAS,CAAA,OAAQtB,EAAQ,OAAQ,YAAW,GAAC,WAAW,OAAO,SAAS,IAAK,CAAA,QAC7EuB,EAAO,EAAA,EACPP,EAAAA,IAAAQ,EAAA,CAAU,UAAWxB,EAAQ,UAAY,CAAA,CAAA,EAC5C,EACAY,EAAAA,KAACa,EAAS,CAAA,EAAE,IACV,SAAA,CAAAb,OAACc,EAAK,CAAA,SAAA,CAAA,SAAOC,EAAYC,EAAe5B,CAAO,CAAC,CAAA,EAAE,EAClDY,EAAAA,KAACiB,EAAK,CAAA,IAAI,IACR,SAAA,CAAAb,EAAAA,IAACU,GAAK,SAAK,OAAA,CAAA,EACV1B,EAAQ,KACN,OAAQ8B,GAAMA,EAAE,CAAC,IAAM,GAAG,EAC1B,IAAI,CAAC,CAACC,EAAGC,CAAG,UACVC,EAAe,CAAA,SAAAD,GAANA,CAAU,CACrB,CAAA,EACL,CAAA,EACF,EACAhB,EAAAA,IAACkB,GAAW,EAAE,IAAI,QAAQ,OAAO,GAAG,IAAI,IAAI,IAC1C,SAAAlB,EAAA,IAACmB,EAAA,CACC,GAAIC,EACJ,SAAUpB,EAAAA,IAACqB,EAAO,CAAA,QAAS,CAAG,CAAA,EAC9B,KAAMC,EAAqBtC,CAAO,EAClC,WAAU,GACV,QAAQ,OACT,SAAA,kBAAA,CAAA,EAGH,CACF,CAAA,CAAA,CAEJ"}