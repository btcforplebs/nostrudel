{"version":3,"file":"newest-D9Qgn4i8.js","sources":["../../src/views/community/views/newest.tsx"],"sourcesContent":["import { useOutletContext } from \"react-router-dom\";\n\nimport { COMMUNITY_APPROVAL_KIND, buildApprovalMap, getCommunityMods } from \"../../../helpers/nostr/communities\";\nimport useSubject from \"../../../hooks/use-subject\";\nimport { useTimelineCurserIntersectionCallback } from \"../../../hooks/use-timeline-cursor-intersection-callback\";\nimport IntersectionObserverProvider from \"../../../providers/local/intersection-observer\";\nimport TimelineActionAndStatus from \"../../../components/timeline/timeline-action-and-status\";\nimport useUserMuteFilter from \"../../../hooks/use-user-mute-filter\";\nimport ApprovedEvent from \"../components/community-approved-post\";\nimport { RouterContext } from \"../community-home\";\nimport { useObservable } from \"applesauce-react\";\n\nexport default function CommunityNewestView() {\n  const { community, timeline } = useOutletContext<RouterContext>();\n  const muteFilter = useUserMuteFilter();\n  const mods = getCommunityMods(community);\n\n  const events = useObservable(timeline.timeline) ?? [];\n  const approvalMap = buildApprovalMap(events, mods);\n\n  const approved = events\n    .filter((e) => e.kind !== COMMUNITY_APPROVAL_KIND && approvalMap.has(e.id))\n    .map((event) => ({ event, approvals: approvalMap.get(event.id) }))\n    .filter((e) => !muteFilter(e.event));\n\n  const callback = useTimelineCurserIntersectionCallback(timeline);\n\n  return (\n    <>\n      <IntersectionObserverProvider callback={callback}>\n        {approved.map(({ event, approvals }) => (\n          <ApprovedEvent key={event.id} event={event} approvals={approvals ?? []} />\n        ))}\n      </IntersectionObserverProvider>\n      <TimelineActionAndStatus timeline={timeline} />\n    </>\n  );\n}\n"],"names":["CommunityNewestView","community","timeline","useOutletContext","muteFilter","useUserMuteFilter","mods","getCommunityMods","events","useObservable","approvalMap","buildApprovalMap","approved","COMMUNITY_APPROVAL_KIND","event","callback","useTimelineCurserIntersectionCallback","jsxs","Fragment","jsx","IntersectionObserverProvider","approvals","ApprovedEvent","TimelineActionAndStatus"],"mappings":"uPAYA,SAAwBA,GAAsB,CAC5C,KAAM,CAAE,UAAAC,EAAW,SAAAC,CAAS,EAAIC,EAAgC,EAC1DC,EAAaC,IACbC,EAAOC,EAAiBN,CAAS,EAEjCO,EAASC,EAAcP,EAAS,QAAQ,GAAK,CAAA,EAC7CQ,EAAcC,EAAiBH,EAAQF,CAAI,EAE3CM,EAAWJ,EACd,OAAQ,GAAM,EAAE,OAASK,GAA2BH,EAAY,IAAI,EAAE,EAAE,CAAC,EACzE,IAAKI,IAAW,CAAE,MAAAA,EAAO,UAAWJ,EAAY,IAAII,EAAM,EAAE,CAAE,EAAE,EAChE,OAAQ,GAAM,CAACV,EAAW,EAAE,KAAK,CAAC,EAE/BW,EAAWC,EAAsCd,CAAQ,EAE/D,OAEIe,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAC,MAACC,GAA6B,SAAAL,EAC3B,SAAAH,EAAS,IAAI,CAAC,CAAE,MAAAE,EAAO,UAAAO,CAAU,UAC/BC,EAA6B,CAAA,MAAAR,EAAc,UAAWO,GAAa,IAAhDP,EAAM,EAA8C,CACzE,EACH,EACAK,MAACI,GAAwB,SAAArB,EAAoB,CAC/C,CAAA,CAAA,CAEJ"}