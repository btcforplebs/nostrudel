import{j as r,E as m,l as d,cf as h,eO as f,z as x,eP as y,r as p,B as i,eQ as j,eR as w,s as E,F as R}from"./index-C6wlVu-O.js";import{H as l}from"./hls-Bon9X3-D.js";import{P}from"./play-BortdZAr.js";function I({track:e}){return r.jsx(m,{as:d,leftIcon:r.jsx(h,{src:"https://stemstr.app/favicon.svg"}),href:`https://stemstr.app/thread/${e.id}`,colorScheme:"purple",isExternal:!0,children:"View on Stemstr"})}function B({track:e,...a}){const o=f(e);return o?r.jsx(x,{as:d,icon:r.jsx(y,{}),"aria-label":"Download",title:"Download",href:o.url,download:!0,isExternal:!0,...a}):null}function v({stream:e,autoPlay:a,poster:o,muted:n,...u}){const s=p.useRef(null);return p.useEffect(()=>{if(e&&s.current&&!s.current.src&&l.isSupported())try{const t=new l({capLevelToPlayerSize:!0});return t.loadSource(e),t.attachMedia(s.current),t.on(l.Events.ERROR,(T,c)=>{c.type===l.ErrorTypes.NETWORK_ERROR&&c.fatal&&(t.stopLoad(),t.detachMedia())}),t.on(l.Events.MANIFEST_PARSED,()=>{}),()=>t.destroy()}catch(t){console.error(t)}},[s,e]),r.jsx(i,{as:"audio",ref:s,playsInline:!0,autoPlay:a,poster:o,muted:n,controls:!0,...u})}function L({track:e}){const a=j(e),o=f(e),n=w(e),u=E();return u.isOpen?a?r.jsx(v,{stream:a.url,w:"full",autoPlay:!0,h:"20"}):o?r.jsx(i,{as:"audio",controls:!0,w:"full",autoPlay:!0,h:"20",children:r.jsx("source",{src:o.url,type:o.format})}):null:r.jsxs(R,{gap:"2px",h:"20",alignItems:"center",px:"4",py:"2",overflow:"hidden",borderColor:"primary.500",borderWidth:"1px",borderRadius:"lg",position:"relative",children:[r.jsx(x,{"aria-label":"Play",mr:"4",icon:r.jsx(P,{}),onClick:u.onOpen,size:"md",variant:"outline"}),n==null?void 0:n.map(s=>r.jsx(i,{h:s+"%",w:"3px",bg:"primary.800"}))]})}export{L as T,B as a,I as b};
//# sourceMappingURL=track-player-Dx3_bwFM.js.map
